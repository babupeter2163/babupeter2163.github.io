<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="CEMSmd_files/libs/clipboard/clipboard.min.js"></script>
<script src="CEMSmd_files/libs/quarto-html/quarto.js"></script>
<script src="CEMSmd_files/libs/quarto-html/popper.min.js"></script>
<script src="CEMSmd_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="CEMSmd_files/libs/quarto-html/anchor.min.js"></script>
<link href="CEMSmd_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="CEMSmd_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="CEMSmd_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="CEMSmd_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="CEMSmd_files/libs/bootstrap/bootstrap-8a79a254b8e706d3c925cde0a310d4f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="CEMSmd_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="CEMSmd_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="CEMSmd_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In today’s digital world, <strong>Analog-to-Digital Converters (ADCs)</strong> are everywhere—from smartphones and medical devices to industrial sensors and audio systems. They convert real-world analog signals, like sound and motion, into digital data that computers can understand.</p>
<p>One of the most powerful types of ADCs is the <strong>Delta-Sigma Modulator (DSM)</strong>, known for its <strong>high accuracy and noise reduction</strong>. Unlike traditional ADCs, DSMs use <strong>oversampling and feedback loops</strong> to improve signal quality, making them ideal for applications that require precision, such as <strong>communication systems, and high-fidelity audio processing</strong>.</p>
<section id="what-this-document-covers" class="level2">
<h2 class="anchored" data-anchor-id="what-this-document-covers">What This Document Covers</h2>
<p>This work explores the <strong>design, implementation, and analysis of Delta-Sigma ADCs</strong> through both theory and hands-on experimentation. We will cover:</p>
<p><strong>How ADCs work</strong>, including key components like filters, samplers, and quantizers. <strong>Types of ADCs</strong>, including Flash, Successive Approximation, and Delta-Sigma. <strong>The practical design of a Delta-Sigma ADC system</strong>, integrating: -ADXL335 Accelerometer for motion sensing. -ADS1115 ADC for signal conversion. -ESP8266 Microcontroller for data processing and display.</p>
<p><strong>Circuit design and simulations using MATLAB/Simulink, LTSpice, and Xschem</strong> to model and test ADC performance along with findings and challenges have been documented.</p>
</section>
<section id="why-delta-sigma-adcs" class="level2">
<h2 class="anchored" data-anchor-id="why-delta-sigma-adcs">Why Delta-Sigma ADCs?</h2>
<p>Delta-Sigma ADCs stand out because they <strong>filter out noise, enhance precision, and are cost-effective</strong>. They use a clever trick—<strong>oversampling</strong>—to capture more signal details than conventional ADCs, making them ideal for low-frequency, high-accuracy applications.</p>
</section>
<section id="how-this-document-is-organized" class="level2">
<h2 class="anchored" data-anchor-id="how-this-document-is-organized">How This Document is Organized</h2>
<p>This document is structured to take you from the basics of ADCs to the design, simulation, and practical implementation of Delta-Sigma ADCs. You’ll find:</p>
<p>-Introduction – Understanding ADCs and why Delta-Sigma is special. -Design and Implementation – Hands-on system design using sensors, microcontrollers, and ADCs. -Circuit Simulations – Testing and analyzing ADC performance in MATLAB, LTSpice, and Xschem. -Applications and Challenges – Real-world uses and common design hurdles.</p>
</section>
<section id="analog-signal-processing-system" class="level2">
<h2 class="anchored" data-anchor-id="analog-signal-processing-system">Analog Signal Processing System</h2>
<section id="system-overview" class="level3">
<h3 class="anchored" data-anchor-id="system-overview"><strong>System Overview</strong></h3>
<p>This documentation presents the <strong>design and implementation</strong> of a <strong>Delta Sigma Modulator</strong>. The system successfully captures real-time acceleration data, converts it into digital form, processes it using a microcontroller, and visualizes the results on a screen. The primary focus was the <strong>ADC subsystem</strong>, particularly the <strong>custom Delta-Sigma Modulator (DSM)</strong> integrated within the ADS1115, replacing the standard comparator with a <strong>5T OTA</strong> in the design of <strong>1st order and 2nd order DSM</strong>.</p>
<p>The system comprises the following components: - <strong>ADXL335 Accelerometer</strong> for motion sensing. - <strong>ADS1115 Analog-to-Digital Converter (ADC)</strong> for high-resolution signal conversion. - <strong>ESP8266 Microcontroller</strong> for processing and data transmission. - <strong>Custom Delta-Sigma Modulator (DSM) with a 5T Operational Transconductance Amplifier (OTA)</strong> to replace ADC.</p>
</section>
<section id="block-diagram-of-the-system" class="level3">
<h3 class="anchored" data-anchor-id="block-diagram-of-the-system"><strong>Block Diagram of the System</strong></h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A["Accelerometer"] --&gt; B[/Analog to Digital convertor/] --&gt; C["Microcontroller"]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The system consists of three main blocks: an <strong>accelerometer</strong>, an <strong>analog-to-digital converter (ADC)</strong>, and a <strong>microcontroller</strong>. The accelerometer detects motion and generates analog voltage signals corresponding to acceleration in three axes (X, Y, and Z). These analog signals are then fed into the ADC, which converts them into a digital format for further processing. Finally, the microcontroller receives the digitized data, processes it, and transmits the results for visualization or further analysis.</p>
<section id="system-implementation-on-breadboard" class="level4">
<h4 class="anchored" data-anchor-id="system-implementation-on-breadboard"><strong>System Implementation on Breadboard</strong></h4>
<p>The designed system has been successfully assembled on a breadboard, as shown in the image below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-32-aec6b675-83cd-4c28-8199-37135f7705c3.png" class="img-fluid figure-img"></p>
<figcaption>Breadboard</figcaption>
</figure>
</div>
<p>The hardware components are interconnected according to the block diagram, ensuring proper signal flow and data acquisition. The accelerometer, ADC, and microcontroller are wired to facilitate seamless communication. This physical setup validates the theoretical design and allows for real-time testing and evaluation.</p>
<p>This setup ensures high-precision motion sensing, making it suitable for applications such as vibration monitoring, tilt sensing, and real-time motion tracking.</p>
</section>
</section>
</section>
<section id="functional-blocks-and-interfaces-of-our-system" class="level2">
<h2 class="anchored" data-anchor-id="functional-blocks-and-interfaces-of-our-system"><strong>Functional Blocks and Interfaces of our System</strong></h2>
<section id="accelerometer-adxl335" class="level3">
<h3 class="anchored" data-anchor-id="accelerometer-adxl335"><strong>Accelerometer (ADXL335)</strong></h3>
<p>The <strong>ADXL335</strong> is a low-power, three-axis MEMS accelerometer by Analog Devices, capable of measuring both <strong>static</strong> and <strong>dynamic accelerations</strong> such as gravity, motion, shock, or vibration.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-19-612dcf0d-2a17-4c5f-a6d7-59d727f1d176.png" class="img-fluid figure-img"></p>
<figcaption>ADXL335</figcaption>
</figure>
</div>
<ul>
<li><strong>Basic Functionality:</strong> Measures acceleration in X, Y, and Z axes.</li>
<li><strong>Output:</strong> Analog voltage signals proportional to acceleration.</li>
<li><strong>Interfacing:</strong> Connected to ADS1115’s analog input channels and outputs interfaced with ADS1115.</li>
<li><strong>Key Features:</strong></li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Feature</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Operating Voltage</td>
<td>1.8V – 3.6V</td>
</tr>
<tr class="even">
<td>Operating Current</td>
<td>350μA (typical)</td>
</tr>
<tr class="odd">
<td>Sensing Range</td>
<td>±3g (Full Scale)</td>
</tr>
<tr class="even">
<td>Temperature Range</td>
<td>−40°C to +85°C</td>
</tr>
<tr class="odd">
<td>Sensing Axis</td>
<td>3 Axis</td>
</tr>
<tr class="even">
<td>Sensitivity</td>
<td>270–330mV/g</td>
</tr>
<tr class="odd">
<td>Shock Resistance</td>
<td>Up to 10,000g</td>
</tr>
<tr class="even">
<td>Dimensions</td>
<td>4mm x 4mm x 1.45mm</td>
</tr>
</tbody>
</table>
<section id="mems-accelerometer-working-principle" class="level4">
<h4 class="anchored" data-anchor-id="mems-accelerometer-working-principle">MEMS Accelerometer Working Principle</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-43-edd9cdc1-35c1-4f42-9b4a-395ce8e77a77.png" class="img-fluid figure-img"></p>
<figcaption>MEMS acc</figcaption>
</figure>
</div>
<p>A <strong>MEMS (Micro-Electro-Mechanical System) accelerometer</strong> is a tiny structure built on a silicon wafer, suspended by <strong>polysilicon springs</strong>. When the sensor experiences acceleration along the X, Y, and/or Z axes, the suspended structure moves, causing a change in <strong>capacitance</strong> between fixed plates and the attached plates. This change is proportional to the acceleration, and the sensor converts it into an <strong>analog output voltage</strong>.</p>
<ul>
<li><strong>Reference:</strong> <a href="https://www.analog.com/en/products/adxl335.html#product-overview">ADXL335 Datasheet</a> | <a href="https://lastminuteengineers.com/adxl335-accelerometer-arduino-tutorial/">ADXL335 working</a></li>
</ul>
</section>
</section>
<section id="analog-to-digital-converter-ads1115" class="level3">
<h3 class="anchored" data-anchor-id="analog-to-digital-converter-ads1115"><strong>Analog-to-Digital Converter (ADS1115)</strong></h3>
<ul>
<li><strong>Reasons why we use the ADC as an intermediate block between the Accelerometer and the Microcontroller:</strong>
<ul>
<li><strong>Higher Resolution:</strong> ADS1115 provides more accurate readings than the ESP8266’s built-in ADC.</li>
<li><strong>Lower Noise:</strong> ADS1115 minimizes noise interference for cleaner data.</li>
<li><strong>Programmability:</strong> ADS1115 offers flexible configuration for optimal performance.</li>
<li><strong>Reduced ESP8266 Load:</strong> Offloads ADC tasks, freeing up resources for other functions.</li>
<li><strong>Simplified Interfacing:</strong> I2C communication simplifies wiring and reduces pin count.</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-4-0d731db0-5e0d-455f-815d-4c2fd5cf17d8.png" class="img-fluid figure-img"></p>
<figcaption>ADS1115</figcaption>
</figure>
</div>
<ul>
<li><strong>Function:</strong> Converts the analog signal from ADXL335 to a 16-bit digital output.</li>
<li><strong>Internal Components:</strong>
<ul>
<li><strong>Multiplexer (MUX):</strong> Selects input channels</li>
<li><strong>Programmable Gain Amplifier (PGA):</strong> Enhances signal resolution</li>
<li><strong>Delta-Sigma ADC:</strong> Converts analog to digital signal</li>
<li><strong>Comparator:</strong> Used for threshold-based signal analysis</li>
</ul></li>
<li><strong>Modes of Operation:</strong>
<ul>
<li>Continuous conversion mode</li>
<li>Single-shot conversion mode (low-power optimization)</li>
</ul></li>
</ul>
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-13-4723f87b-118f-4c9f-9fb5-3abbe12a57a6.png" class="img-fluid" alt="ADS1115 Board"> - <strong>Specifications:</strong> - Resolution: 16-bit - Input range: ±256 mV to ±6.144 V - Data rate: Programmable up to 860 samples per second - Low power consumption: 150 µA (typical) - Integrated voltage reference and oscillator</p>
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-11-3e26e86f-2faa-4f75-a6e8-9d8ac557d3a6.png" class="img-fluid" alt="ADS1115 Board2"> - <strong>Interfacing:</strong> Communicates with ESP8266 via I²C protocol.</p>
<ul>
<li><strong>Reference:</strong> <a href="https://www.ti.com/product/ADS1115">ADS1115 Datasheet</a></li>
</ul>
</section>
<section id="microcontroller-esp8266" class="level3">
<h3 class="anchored" data-anchor-id="microcontroller-esp8266"><strong>Microcontroller (ESP8266)</strong></h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-38-da3f5c7a-d572-4cf0-8817-6c9ed4346460.png" class="img-fluid figure-img"></p>
<figcaption>ESP8266</figcaption>
</figure>
</div>
<ul>
<li><strong>Function:</strong> Processes the digitized signal and transmits data to the laptop.</li>
<li><strong>Programming Interface:</strong> Arduino IDE with I²C communication.</li>
<li><strong>Specifications:</strong>
<ul>
<li>80 MHz CPU frequency</li>
<li>96KB RAM</li>
<li>SPI/I2C/UART interfaces</li>
</ul></li>
<li><strong>Reference:</strong> <a href="https://docs.micropython.org/en/v1.11/esp8266/general.html">ESP8266 Documentation 1</a> | <a href="https://diyi0t.com/i2c-tutorial-for-arduino-and-esp8266">ESP8266 Documentation 2</a></li>
</ul>
</section>
<section id="ide-code-execution-arduino-ide" class="level3">
<h3 class="anchored" data-anchor-id="ide-code-execution-arduino-ide"><strong>IDE Code Execution (Arduino IDE)</strong></h3>
<p>The following code was executed through <strong>Arduino IDE</strong> to initialize the system, acquire signals from the accelerometer, data conversion them by the ADC, process through Microcontroller and display the results on the laptop.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ADS1115_WE.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define I2C_ADDRESS </span><span class="bn">0x48</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>ADS1115_WE adc <span class="op">=</span> ADS1115_WE<span class="op">(</span>I2C_ADDRESS<span class="op">);</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    Wire<span class="op">.</span>begin<span class="op">();</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>adc<span class="op">.</span>init<span class="op">())</span> <span class="op">{</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"ADS1115 not connected!"</span><span class="op">);</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    adc<span class="op">.</span>setVoltageRange_mV<span class="op">(</span>ADS1115_RANGE_6144<span class="op">);</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    adc<span class="op">.</span>setCompareChannels<span class="op">(</span>ADS1115_COMP_0_GND<span class="op">);</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    adc<span class="op">.</span>setMeasureMode<span class="op">(</span>ADS1115_CONTINUOUS<span class="op">);</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    adc<span class="op">.</span>setConvRate<span class="op">(</span>ADS1115_128_SPS<span class="op">);</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"ADS1115 Initialization Complete"</span><span class="op">);</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"Starting Continuous Measurement..."</span><span class="op">);</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">"All values are in volts.</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"Ax: "</span><span class="op">);</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span>readChannel<span class="op">(</span>ADS1115_COMP_0_GND<span class="op">));</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"   Ay: "</span><span class="op">);</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span>readChannel<span class="op">(</span>ADS1115_COMP_1_GND<span class="op">));</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"   Az: "</span><span class="op">);</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>print<span class="op">(</span>readChannel<span class="op">(</span>ADS1115_COMP_2_GND<span class="op">));</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    Serial<span class="op">.</span>println<span class="op">();</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> readChannel<span class="op">(</span>ADS1115_MUX channel<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    adc<span class="op">.</span>setCompareChannels<span class="op">(</span>channel<span class="op">);</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> adc<span class="op">.</span>getResult_V<span class="op">();</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="system-output-and-analysis" class="level3">
<h3 class="anchored" data-anchor-id="system-output-and-analysis"><strong>System Output and Analysis</strong></h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-27-94696777-0eef-4f3b-8630-a373d452aaa5.png" class="img-fluid figure-img"></p>
<figcaption>Arduino Out</figcaption>
</figure>
</div>
<p>The output readings obtained from our system are as follows: - <strong>Ax (X-axis acceleration):</strong> Ranging from 1.39V to 1.91V - <strong>Ay (Y-axis acceleration):</strong> Ranging from 1.40V to 1.93V - <strong>Az (Z-axis acceleration):</strong> Ranging from 1.57V to 2.01V</p>
<p>The data showcases variations in acceleration detected by the <strong>ADXL335 accelerometer</strong>. As the system operates in <strong>continuous measurement mode</strong>, the ADC continuously samples and transmits data to the microcontroller, which then displays the results. The variations in Ax, Ay, and Az indicate changes in motion along the three axes, which can be correlated to tilting, rotation, or vibration of the sensor.</p>
</section>
</section>
<section id="signal-and-interface-descriptions" class="level2">
<h2 class="anchored" data-anchor-id="signal-and-interface-descriptions"><strong>Signal and Interface Descriptions</strong></h2>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Block</strong></th>
<th><strong>Input</strong></th>
<th><strong>Output</strong></th>
<th><strong>Communication Protocol</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ADXL335</td>
<td>3.3V Power, Motion</td>
<td>Analog Voltage (X, Y, Z)</td>
<td>Connected to ADS1115 Analog Inputs</td>
</tr>
<tr class="even">
<td>ADS1115</td>
<td>Analog Signals</td>
<td>16-bit Digital Output</td>
<td>I²C Communication</td>
</tr>
<tr class="odd">
<td>ESP8266</td>
<td>Digital Data (I²C)</td>
<td>Processed Data via Serial</td>
<td>USB (Laptop)</td>
</tr>
</tbody>
</table>
</section>
<section id="matlab-behavioural-model-and-simulink" class="level1">
<h1>Matlab Behavioural Model and Simulink</h1>
<section id="st-order-delta-sigma-modulator" class="level2">
<h2 class="anchored" data-anchor-id="st-order-delta-sigma-modulator">1st Order Delta-Sigma Modulator</h2>
<section id="system-model-description" class="level3">
<h3 class="anchored" data-anchor-id="system-model-description">System Model Description</h3>
<p>A Delta-Sigma Modulator (DSM) is a key component in analog-to-digital conversion. It works by oversampling an input signal and shaping the quantization noise to high frequencies outside the signal bandwidth. This allows for increased resolution within the desired bandwidth after digital filtering and downsampling.</p>
<section id="key-components" class="level4">
<h4 class="anchored" data-anchor-id="key-components">Key Components:</h4>
<ul>
<li><strong>Input Signal:</strong> A sine wave used as the test input.</li>
<li><strong>Noise Transfer Function (NTF):</strong> Shapes the quantization noise.</li>
<li><strong>Quantizer:</strong> Produces a discrete output.</li>
<li><strong>Feedback Loop:</strong> Ensures stability and improves accuracy.</li>
</ul>
<p>The <strong>1st Order DSM</strong> consists of a single integrator in the feedback loop. The noise shaping improves the signal-to-noise ratio (SNR) by pushing the quantization noise to higher frequencies.</p>
</section>
</section>
<section id="design-procedure" class="level3">
<h3 class="anchored" data-anchor-id="design-procedure">Design Procedure</h3>
<section id="parameters" class="level4">
<h4 class="anchored" data-anchor-id="parameters">Parameters</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="va">L</span> <span class="op">=</span> <span class="fl">1</span><span class="op">;</span>                <span class="co">% Order of modulator</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="va">form</span> <span class="op">=</span> <span class="ss">'CIFB'</span><span class="op">;</span>        <span class="co">% Cascade of integrator feedback</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="va">fs</span> <span class="op">=</span> <span class="fl">220e3</span><span class="op">;</span>           <span class="co">% Sampling frequency (higher to improve resolution)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="va">Ts</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">fs</span><span class="op">;</span>            <span class="co">% Sampling time</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="va">OSR</span> <span class="op">=</span> <span class="fl">256</span><span class="op">;</span>            <span class="co">% Oversampling Ratio</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">16</span> <span class="op">*</span> <span class="va">OSR</span><span class="op">;</span>         <span class="co">% Simulation length (output samples), FFT points</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="va">fB</span> <span class="op">=</span> <span class="va">fs</span> <span class="op">/</span> (<span class="fl">2</span> <span class="op">*</span> <span class="va">OSR</span>)<span class="op">;</span>  <span class="co">% Bandwidth</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="va">cycles</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>           <span class="co">% Number of sinusoids in the input</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="va">fx</span> <span class="op">=</span> <span class="va">cycles</span> <span class="op">*</span> <span class="va">fs</span> <span class="op">/</span> <span class="va">N</span><span class="op">;</span> <span class="co">% Input test tone frequency</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="fl">0.7</span><span class="op">;</span>              <span class="co">% Signal amplitude (scaled for input range)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="va">t</span> <span class="op">=</span> <span class="va">Ts</span> <span class="op">*</span> (<span class="fl">0</span><span class="op">:</span><span class="va">N</span><span class="op">-</span><span class="fl">1</span>)<span class="op">;</span>     <span class="co">% Time vector</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="va">u</span> <span class="op">=</span> <span class="va">A</span> <span class="op">*</span> <span class="va">sin</span>(<span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">fx</span> <span class="op">*</span> <span class="va">t</span>)<span class="op">;</span> <span class="co">% Input sinewave signal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="design-steps" class="level4">
<h4 class="anchored" data-anchor-id="design-steps">Design Steps</h4>
<ol type="1">
<li><strong>Define Parameters:</strong> Set modulator order, sampling frequency, oversampling ratio, and input signal.</li>
<li><strong>Synthesize NTF:</strong> Use the <code>synthesizeNTF</code> function to generate the noise transfer function.</li>
<li><strong>Realize DSM:</strong> Realize the DSM using <code>realizeNTF</code> and scale coefficients with <code>scaleABCD</code>.</li>
<li><strong>Simulate DSM:</strong> Simulate the modulator and obtain the output using <code>simulateDSM</code>.</li>
<li><strong>Analyze Outputs:</strong> Generate time-domain response, Bode plot, pole-zero plot, and spectral analysis.</li>
</ol>
</section>
</section>
<section id="matlab-code" class="level3">
<h3 class="anchored" data-anchor-id="matlab-code">MATLAB Code</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">%% 1st Order Delta-Sigma Modulator by Peter</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="va">clc</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span> <span class="va">all</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">%% Parameters</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="va">L</span> <span class="op">=</span> <span class="fl">1</span><span class="op">;</span>                <span class="co">% Order of modulator</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="va">form</span> <span class="op">=</span> <span class="ss">'CIFB'</span><span class="op">;</span>        <span class="co">% Cascade of integrator feedback</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="va">fs</span> <span class="op">=</span> <span class="fl">220e3</span><span class="op">;</span>           <span class="co">% Sampling frequency (higher to improve resolution)</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="va">Ts</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">fs</span><span class="op">;</span>            <span class="co">% Sampling time</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="va">OSR</span> <span class="op">=</span> <span class="fl">256</span><span class="op">;</span>            <span class="co">% Oversampling Ratio</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">16</span> <span class="op">*</span> <span class="va">OSR</span><span class="op">;</span>         <span class="co">% Simulation length (output samples), FFT points</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="va">fB</span> <span class="op">=</span> <span class="va">fs</span> <span class="op">/</span> (<span class="fl">2</span> <span class="op">*</span> <span class="va">OSR</span>)<span class="op">;</span>  <span class="co">% Bandwidth</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="va">cycles</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>           <span class="co">% Number of sinusoids in the input</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="va">fx</span> <span class="op">=</span> <span class="va">cycles</span> <span class="op">*</span> <span class="va">fs</span> <span class="op">/</span> <span class="va">N</span><span class="op">;</span> <span class="co">% Input test tone frequency</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="fl">0.7</span><span class="op">;</span>              <span class="co">% Signal amplitude (scaled for input range)</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="va">t</span> <span class="op">=</span> <span class="va">Ts</span> <span class="op">*</span> (<span class="fl">0</span><span class="op">:</span><span class="va">N</span><span class="op">-</span><span class="fl">1</span>)<span class="op">;</span>     <span class="co">% Time vector</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="va">u</span> <span class="op">=</span> <span class="va">A</span> <span class="op">*</span> <span class="va">sin</span>(<span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">fx</span> <span class="op">*</span> <span class="va">t</span>)<span class="op">;</span> <span class="co">% Input sinewave signal</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">%% Design NTF</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="va">H</span> <span class="op">=</span> <span class="va">synthesizeNTF</span>(<span class="va">L</span><span class="op">,</span> <span class="va">OSR</span>)<span class="op">;</span> <span class="co">% Noise Transfer Function (NTF)</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">%% Bode Plot</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="va">f</span> <span class="op">=</span> <span class="va">linspace</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="va">N</span><span class="op">/</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">1</span>)<span class="op">;</span> <span class="co">% Normalized frequency vector</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="va">z</span> <span class="op">=</span> <span class="va">exp</span>(<span class="fl">2i</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">f</span>)<span class="op">;</span>          <span class="co">% Frequency domain representation</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">f</span><span class="op">,</span> <span class="va">dbv</span>(<span class="va">evalTF</span>(<span class="va">H</span><span class="op">,</span> <span class="va">z</span>))<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Bode Plot of NTF'</span>)<span class="op">;</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Normalized Frequency (f/fs)'</span>)<span class="op">;</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Magnitude (dB)'</span>)<span class="op">;</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co">%% Realize DSM and Scale Coefficients</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>[<span class="va">a</span><span class="op">,</span> <span class="va">g</span><span class="op">,</span> <span class="va">b</span><span class="op">,</span> <span class="va">c</span>] <span class="op">=</span> <span class="va">realizeNTF</span>(<span class="va">H</span><span class="op">,</span> <span class="va">form</span>)<span class="op">;</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="va">b</span>(<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>) <span class="op">=</span> <span class="fl">0</span><span class="op">;</span> <span class="co">% Modify feedback path</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="va">ABCD</span> <span class="op">=</span> <span class="va">stuffABCD</span>(<span class="va">a</span><span class="op">,</span> <span class="va">g</span><span class="op">,</span> <span class="va">b</span><span class="op">,</span> <span class="va">c</span><span class="op">,</span> <span class="va">form</span>)<span class="op">;</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>[<span class="va">ABCDs</span><span class="op">,</span> <span class="va">umax</span>] <span class="op">=</span> <span class="va">scaleABCD</span>(<span class="va">ABCD</span>)<span class="op">;</span> <span class="co">% Scale the ABCD matrix</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co">%% Simulate DSM</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>[<span class="va">v</span><span class="op">,</span> <span class="va">xn</span><span class="op">,</span> <span class="va">xmax</span><span class="op">,</span> <span class="va">y</span>] <span class="op">=</span> <span class="va">simulateDSM</span>(<span class="va">u</span><span class="op">,</span> <span class="va">ABCDs</span>)<span class="op">;</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co">%% Time-Domain Plot of DSM</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="va">set</span>(<span class="va">gca</span><span class="op">,</span> <span class="ss">'fontsize'</span><span class="op">,</span> <span class="fl">14</span>)<span class="op">;</span> <span class="co">% Set font size for readability</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot input signal (u)</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">t</span><span class="op">,</span> <span class="va">u</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a><span class="co">% Stair-step the quantized output (v)</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="va">stairs</span>(<span class="va">t</span><span class="op">,</span> <span class="va">v</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">off</span><span class="op">;</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="co">% Apply scaling as per the reference</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="va">min</span>(<span class="va">t</span>)<span class="op">,</span> <span class="va">max</span>(<span class="va">t</span>)<span class="op">/</span><span class="fl">8</span><span class="op">,</span> <span class="fl">1.1</span><span class="op">*</span><span class="va">min</span>(<span class="va">v</span>)<span class="op">,</span> <span class="fl">1.1</span><span class="op">*</span><span class="va">max</span>(<span class="va">v</span>)])<span class="op">;</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a><span class="co">% Add labels and title</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Time t/T'</span>)<span class="op">;</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Amplitude'</span>)<span class="op">;</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="va">legend</span>(<span class="ss">'u'</span><span class="op">,</span> <span class="ss">'v'</span><span class="op">,</span> <span class="ss">'Location'</span><span class="op">,</span> <span class="ss">'best'</span>)<span class="op">;</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'1st Order \Sigma\Delta: Time-Domain Response'</span>)<span class="op">;</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="co">%% Spectral Analysis (FFT)</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="va">sq</span> <span class="op">=</span> <span class="va">abs</span>(<span class="va">fft</span>(<span class="va">v</span>))<span class="op">;</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a><span class="co">% Normalize and process FFT</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="va">f_fft</span> <span class="op">=</span> (<span class="fl">0</span><span class="op">:</span><span class="va">N</span><span class="op">/</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>) <span class="op">/</span> <span class="va">N</span><span class="op">;</span> <span class="co">% Frequency vector</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a><span class="va">sq_hlf</span> <span class="op">=</span> <span class="va">sq</span>(<span class="fl">1</span><span class="op">:</span><span class="va">N</span><span class="op">/</span><span class="fl">2</span>) <span class="op">*</span> <span class="fl">2</span> <span class="op">/</span> <span class="va">N</span><span class="op">;</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a><span class="va">sqdBFS</span> <span class="op">=</span> <span class="fl">20</span> <span class="op">*</span> <span class="va">log10</span>(<span class="va">sq_hlf</span>)<span class="op">;</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="va">sqdBFS</span>(<span class="va">sqdBFS</span> <span class="op">==</span> <span class="op">-</span><span class="va">Inf</span>) <span class="op">=</span> <span class="op">-</span><span class="fl">150</span><span class="op">;</span> <span class="co">% Correct log(0) issues</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a><span class="co">% Signal-to-Noise Ratio (SNR) Calculation</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a><span class="va">signal_bin</span> <span class="op">=</span> <span class="va">cycles</span> <span class="op">+</span> <span class="fl">1</span><span class="op">;</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="va">noise</span> <span class="op">=</span> [<span class="va">sq_hlf</span>(<span class="fl">1</span><span class="op">:</span><span class="va">signal_bin</span><span class="op">-</span><span class="fl">1</span>)<span class="op">,</span> <span class="va">sq_hlf</span>(<span class="va">signal_bin</span><span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span>)]<span class="op">;</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a><span class="va">snr</span> <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="va">log10</span>(<span class="va">sq_hlf</span>(<span class="va">signal_bin</span>)<span class="op">^</span><span class="fl">2</span> <span class="op">/</span> <span class="va">sum</span>(<span class="va">noise</span><span class="op">.^</span><span class="fl">2</span>))<span class="op">;</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot Spectral Analysis</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">f_fft</span><span class="op">,</span> <span class="va">sqdBFS</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="fl">0</span> <span class="fl">0.25</span> <span class="op">-</span><span class="fl">120</span> <span class="fl">5</span>])<span class="op">;</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a><span class="va">yticks</span>(<span class="op">-</span><span class="fl">120</span><span class="op">:</span><span class="fl">10</span><span class="op">:</span><span class="fl">5</span>)<span class="op">;</span> <span class="co">% Set Y-axis ticks from -150 to 0 in steps of 10</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>([<span class="ss">'Spectral Analysis (SNR = '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">snr</span><span class="op">,</span> <span class="ss">'%.2f'</span>)<span class="op">,</span> <span class="ss">' dB)'</span>])<span class="op">;</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Normalized Frequency (f/fs)'</span>)<span class="op">;</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Magnitude (dBFS)'</span>)<span class="op">;</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a><span class="co">%% Enhanced Pole-Zero Plot for Stability Visualization</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot the unit circle</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a><span class="va">theta</span> <span class="op">=</span> <span class="va">linspace</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">2</span><span class="op">*</span><span class="va">pi</span><span class="op">,</span> <span class="fl">500</span>)<span class="op">;</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">cos</span>(<span class="va">theta</span>)<span class="op">,</span> <span class="va">sin</span>(<span class="va">theta</span>)<span class="op">,</span> <span class="ss">'k--'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">1.5</span>)<span class="op">;</span> <span class="co">% Dashed unit circle</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot zeros and poles</span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a><span class="va">scatter</span>(<span class="va">real</span>(<span class="va">H</span>.<span class="va">z</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="va">imag</span>(<span class="va">H</span>.<span class="va">z</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="ss">'bo'</span><span class="op">,</span> <span class="ss">'filled'</span><span class="op">,</span> <span class="ss">'DisplayName'</span><span class="op">,</span> <span class="ss">'Zeros'</span>)<span class="op">;</span> <span class="co">% Zeros</span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a><span class="va">scatter</span>(<span class="va">real</span>(<span class="va">H</span>.<span class="va">p</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="va">imag</span>(<span class="va">H</span>.<span class="va">p</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="ss">'rx'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="ss">'DisplayName'</span><span class="op">,</span> <span class="ss">'Poles'</span>)<span class="op">;</span> <span class="co">% Poles</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a><span class="co">% Add grid, axis equal, and labels</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">equal</span><span class="op">;</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Real Part'</span>)<span class="op">;</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Imaginary Part'</span>)<span class="op">;</span></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Enhanced Pole-Zero Plot with Stability Criterion'</span>)<span class="op">;</span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a><span class="va">legend</span>(<span class="ss">'Unit Circle'</span><span class="op">,</span> <span class="ss">'Zeros'</span><span class="op">,</span> <span class="ss">'Poles'</span><span class="op">,</span> <span class="ss">'Location'</span><span class="op">,</span> <span class="ss">'best'</span>)<span class="op">;</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a><span class="co">% Annotate stability check</span></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="va">all</span>(<span class="va">abs</span>(<span class="va">H</span>.<span class="va">p</span>{<span class="fl">1</span>}) <span class="op">&lt;</span> <span class="fl">1</span>)</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>    <span class="va">stability_msg</span> <span class="op">=</span> <span class="ss">'System is Stable (All poles inside the unit circle)'</span><span class="op">;</span></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>    <span class="va">color</span> <span class="op">=</span> <span class="ss">'g'</span><span class="op">;</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>    <span class="va">stability_msg</span> <span class="op">=</span> <span class="ss">'System is Unstable (Some poles outside the unit circle)'</span><span class="op">;</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>    <span class="va">color</span> <span class="op">=</span> <span class="ss">'r'</span><span class="op">;</span></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="va">text</span>(<span class="op">-</span><span class="fl">1.5</span><span class="op">,</span> <span class="fl">1.2</span><span class="op">,</span> <span class="va">stability_msg</span><span class="op">,</span> <span class="ss">'FontSize'</span><span class="op">,</span> <span class="fl">12</span><span class="op">,</span> <span class="ss">'FontWeight'</span><span class="op">,</span> <span class="ss">'bold'</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> <span class="va">color</span>)<span class="op">;</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">off</span><span class="op">;</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a><span class="co">%% Windowed FFT (Hann Window)</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a><span class="va">specHW</span> <span class="op">=</span> <span class="va">fft</span>(<span class="va">v</span> <span class="op">.*</span> <span class="va">ds_hann</span>(<span class="va">N</span>)) <span class="op">/</span> (<span class="va">N</span> <span class="op">/</span> <span class="fl">4</span>)<span class="op">;</span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">f_fft</span><span class="op">,</span> <span class="va">dbv</span>(<span class="va">specHW</span>(<span class="fl">1</span><span class="op">:</span><span class="va">N</span><span class="op">/</span><span class="fl">2</span>))<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="fl">0</span> <span class="fl">0.23</span> <span class="op">-</span><span class="fl">120</span> <span class="fl">5</span>])<span class="op">;</span></span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a><span class="va">yticks</span>(<span class="op">-</span><span class="fl">120</span><span class="op">:</span><span class="fl">10</span><span class="op">:</span><span class="fl">5</span>)<span class="op">;</span> <span class="co">% Set Y-axis ticks from -150 to 0 in steps of 10</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Windowed Spectral Analysis with Hann Window'</span>)<span class="op">;</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Normalized Frequency (f/fs)'</span>)<span class="op">;</span></span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Magnitude (dBFS)'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="graphical-outputs-and-analysis" class="level3">
<h3 class="anchored" data-anchor-id="graphical-outputs-and-analysis">Graphical Outputs and Analysis</h3>
<section id="time-domain-response" class="level4">
<h4 class="anchored" data-anchor-id="time-domain-response">1. Time-Domain Response</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-28-9e51cd40-eeca-42bd-8887-02a89a175785.png" class="img-fluid figure-img"></p>
<figcaption>Time-Domain Response</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot shows the input signal ((u)) and the quantized output signal ((v)) over time for the 1st-order DSM.</li>
<li><strong>Observations</strong>:
<ul>
<li>The input signal ((u)) is a continuous sinewave.</li>
<li>The output ((v)) is a stair-stepped version of (u), reflecting quantization.</li>
<li>Small deviations between (u) and (v) represent quantization error.</li>
</ul></li>
<li><strong>Significance</strong>: This response illustrates the quantization process. Despite the error, the output tracks the input accurately, demonstrating the modulator’s performance.</li>
</ul>
</section>
<section id="pole-zero-plot-with-stability-criterion" class="level4">
<h4 class="anchored" data-anchor-id="pole-zero-plot-with-stability-criterion">2. Pole-Zero Plot with Stability Criterion</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-16-59171143-e694-4881-951e-755b48a88544.png" class="img-fluid figure-img"></p>
<figcaption>Pole-Zero Plot</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot displays the locations of the poles and zeros of the NTF in the complex plane. The unit circle is included to assess stability.</li>
<li><strong>Observations</strong>:
<ul>
<li>One zero lies near the unit circle on the right-hand side.</li>
<li>A single pole is located inside the unit circle on the left-hand side.</li>
<li>Stability message: <em>System is Stable (All poles inside the unit circle)</em>.</li>
</ul></li>
<li><strong>Significance</strong>: The modulator is stable for the given parameters, as all poles are within the unit circle. Stability is essential for correct operation.</li>
</ul>
</section>
<section id="spectral-analysis" class="level4">
<h4 class="anchored" data-anchor-id="spectral-analysis">3. Spectral Analysis</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-31-abc043da-db20-4d34-a546-f251df961172.png" class="img-fluid figure-img"></p>
<figcaption>Spectral Analysis</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot shows the frequency-domain representation of the modulator’s output, with the signal and quantization noise plotted in decibels relative to full scale (dBFS).</li>
<li><strong>Observations</strong>:
<ul>
<li>A distinct peak at the test signal frequency represents the input sinewave.</li>
<li>Quantization noise dominates the higher frequencies, as expected.</li>
</ul></li>
<li><strong>Significance</strong>: The calculated Signal-to-Noise Ratio (SNR) of ( -4.87 , ) demonstrates the modulator’s performance. Noise shaping aligns with the expected behavior of pushing noise outside the signal bandwidth.</li>
</ul>
</section>
<section id="bode-plot-of-noise-transfer-function-ntf" class="level4">
<h4 class="anchored" data-anchor-id="bode-plot-of-noise-transfer-function-ntf">4. Bode Plot of Noise Transfer Function (NTF)</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-22-71d669bd-f4a7-4127-a23e-0d84aeed930a.png" class="img-fluid figure-img"></p>
<figcaption>Bode Plot</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot represents the magnitude response of the Noise Transfer Function (NTF) for the 1st-order DSM. It highlights how the modulator attenuates quantization noise at different frequencies.</li>
<li><strong>Observations</strong>:
<ul>
<li>At lower frequencies (normalized frequency (f/fs)), the magnitude is close to 0 dB, indicating minimal noise.</li>
<li>As frequency increases, the magnitude rises significantly, reflecting that quantization noise is pushed to higher frequencies outside the signal bandwidth.</li>
</ul></li>
<li><strong>Significance</strong>: The NTF ensures that most quantization noise is concentrated outside the desired signal bandwidth, making it easier to filter.</li>
</ul>
</section>
<section id="windowed-spectral-analysis-with-hann-window" class="level4">
<h4 class="anchored" data-anchor-id="windowed-spectral-analysis-with-hann-window">5. Windowed Spectral Analysis with Hann Window</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-34-ce61f7c0-9cdb-4ab3-a1f9-3c69dfb70a0d.png" class="img-fluid figure-img"></p>
<figcaption>Windowed Spectral Analysis with Hann Window</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Description</strong>: This plot represents the frequency-domain analysis of the modulator’s output using a Hann window to minimize spectral leakage.</p></li>
<li><p><strong>Observations</strong>:</p>
<ul>
<li>A sharp peak is visible at the test signal frequency.</li>
<li>Quantization noise is uniformly distributed across the spectrum due to the windowing effect.</li>
</ul></li>
</ul>
</section>
</section>
<section id="significance" class="level3">
<h3 class="anchored" data-anchor-id="significance">Significance:</h3>
<p>The Hann window ensures that spectral analysis accurately reflects signal and noise characteristics, without boundary artifacts caused by FFT limitations.</p>
</section>
<section id="analysis-and-observations" class="level3">
<h3 class="anchored" data-anchor-id="analysis-and-observations">Analysis and Observations</h3>
<ol type="1">
<li>The <strong>1st Order DSM</strong> achieves noise shaping, pushing quantization noise to high frequencies.</li>
<li>Stability is verified using the <strong>Pole-Zero Plot</strong>.</li>
<li>The <strong>Bode Plot</strong> confirms the frequency response aligns with expectations for a 1st Order NTF.</li>
<li>The <strong>Time-Domain Response</strong> shows accurate quantization of the sine wave.</li>
<li>The <strong>Spectral Analysis</strong> validates high SNR in the signal bandwidth.</li>
</ol>
</section>
</section>
<section id="nd-order-delta-sigma-modulator" class="level2">
<h2 class="anchored" data-anchor-id="nd-order-delta-sigma-modulator">2nd Order Delta-Sigma Modulator</h2>
<section id="system-model-description-1" class="level3">
<h3 class="anchored" data-anchor-id="system-model-description-1">System Model Description</h3>
<p>A Delta-Sigma Modulator (DSM) is a critical component in analog-to-digital conversion. It operates by oversampling an input signal and shaping the quantization noise to higher frequencies outside the signal bandwidth. This approach allows for increased resolution within the desired bandwidth after digital filtering and downsampling.</p>
<section id="key-components-1" class="level4">
<h4 class="anchored" data-anchor-id="key-components-1">Key Components:</h4>
<ul>
<li><strong>Input Signal:</strong> A sine wave used as the test input.</li>
<li><strong>Noise Transfer Function (NTF):</strong> Shapes the quantization noise to higher frequencies.</li>
<li><strong>Quantizer:</strong> Produces discrete output values.</li>
<li><strong>Feedback Loop:</strong> Ensures stability and improves accuracy.</li>
</ul>
<p>The <strong>2nd Order DSM</strong> consists of two integrators in the feedback loop. This design improves noise shaping, resulting in better Signal-to-Noise Ratio (SNR) by pushing even more quantization noise to higher frequencies compared to the 1st order DSM.</p>
</section>
</section>
<section id="design-procedure-1" class="level3">
<h3 class="anchored" data-anchor-id="design-procedure-1">Design Procedure</h3>
<section id="parameters-1" class="level4">
<h4 class="anchored" data-anchor-id="parameters-1">Parameters</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">L</span> <span class="op">=</span> <span class="fl">2</span><span class="op">;</span>                <span class="co">% Order of modulator (2nd order)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="va">form</span> <span class="op">=</span> <span class="ss">'CIFB'</span><span class="op">;</span>        <span class="co">% Cascade of integrator feedback</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="va">fs</span> <span class="op">=</span> <span class="fl">220e3</span><span class="op">;</span>           <span class="co">% Sampling frequency</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="va">Ts</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">fs</span><span class="op">;</span>            <span class="co">% Sampling time</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="va">OSR</span> <span class="op">=</span> <span class="fl">256</span><span class="op">;</span>            <span class="co">% Oversampling Ratio</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">16</span> <span class="op">*</span> <span class="va">OSR</span><span class="op">;</span>         <span class="co">% Simulation length (output samples), FFT points</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="va">fB</span> <span class="op">=</span> <span class="va">fs</span> <span class="op">/</span> (<span class="fl">2</span> <span class="op">*</span> <span class="va">OSR</span>)<span class="op">;</span>  <span class="co">% Bandwidth</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="va">cycles</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>           <span class="co">% Number of sinusoids in the input</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="va">fx</span> <span class="op">=</span> <span class="va">cycles</span> <span class="op">*</span> <span class="va">fs</span> <span class="op">/</span> <span class="va">N</span><span class="op">;</span> <span class="co">% Input test tone frequency</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="fl">0.7</span><span class="op">;</span>              <span class="co">% Signal amplitude (scaled for input range)</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="va">t</span> <span class="op">=</span> <span class="va">Ts</span> <span class="op">*</span> (<span class="fl">0</span><span class="op">:</span><span class="va">N</span><span class="op">-</span><span class="fl">1</span>)<span class="op">;</span>     <span class="co">% Time vector</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="va">u</span> <span class="op">=</span> <span class="va">A</span> <span class="op">*</span> <span class="va">sin</span>(<span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">fx</span> <span class="op">*</span> <span class="va">t</span>)<span class="op">;</span> <span class="co">% Input sinewave signal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="design-steps-1" class="level4">
<h4 class="anchored" data-anchor-id="design-steps-1">Design Steps</h4>
<ol type="1">
<li><strong>Define Parameters:</strong> Set modulator order, sampling frequency, oversampling ratio, and input signal.</li>
<li><strong>Synthesize NTF:</strong> Use the <code>synthesizeNTF</code> function to generate the noise transfer function.</li>
<li><strong>Realize DSM:</strong> Realize the DSM using <code>realizeNTF</code> and scale coefficients with <code>scaleABCD</code>.</li>
<li><strong>Simulate DSM:</strong> Simulate the modulator and obtain the output using <code>simulateDSM</code>.</li>
<li><strong>Analyze Outputs:</strong> Generate time-domain response, Bode plot, pole-zero plot, and spectral analysis.</li>
</ol>
</section>
</section>
<section id="matlab-code-1" class="level3">
<h3 class="anchored" data-anchor-id="matlab-code-1">MATLAB Code</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">%% 2nd Order Delta-Sigma Modulator by Peter</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="va">clc</span><span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span> <span class="va">all</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">%% Parameters</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="va">L</span> <span class="op">=</span> <span class="fl">2</span><span class="op">;</span>                <span class="co">% Order of modulator (2nd order)</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="va">form</span> <span class="op">=</span> <span class="ss">'CIFB'</span><span class="op">;</span>        <span class="co">% Cascade of integrator feedback</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="va">fs</span> <span class="op">=</span> <span class="fl">220e3</span><span class="op">;</span>           <span class="co">% Sampling frequency</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="va">Ts</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">fs</span><span class="op">;</span>            <span class="co">% Sampling time</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="va">OSR</span> <span class="op">=</span> <span class="fl">256</span><span class="op">;</span>            <span class="co">% Oversampling Ratio</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">16</span> <span class="op">*</span> <span class="va">OSR</span><span class="op">;</span>         <span class="co">% Simulation length (output samples), FFT points</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="va">fB</span> <span class="op">=</span> <span class="va">fs</span> <span class="op">/</span> (<span class="fl">2</span> <span class="op">*</span> <span class="va">OSR</span>)<span class="op">;</span>  <span class="co">% Bandwidth</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="va">cycles</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>           <span class="co">% Number of sinusoids in the input</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="va">fx</span> <span class="op">=</span> <span class="va">cycles</span> <span class="op">*</span> <span class="va">fs</span> <span class="op">/</span> <span class="va">N</span><span class="op">;</span> <span class="co">% Input test tone frequency</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="fl">0.7</span><span class="op">;</span>              <span class="co">% Signal amplitude (scaled for input range)</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="va">t</span> <span class="op">=</span> <span class="va">Ts</span> <span class="op">*</span> (<span class="fl">0</span><span class="op">:</span><span class="va">N</span><span class="op">-</span><span class="fl">1</span>)<span class="op">;</span>     <span class="co">% Time vector</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="va">u</span> <span class="op">=</span> <span class="va">A</span> <span class="op">*</span> <span class="va">sin</span>(<span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">fx</span> <span class="op">*</span> <span class="va">t</span>)<span class="op">;</span> <span class="co">% Input sinewave signal</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">%% Design NTF</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="va">H</span> <span class="op">=</span> <span class="va">synthesizeNTF</span>(<span class="va">L</span><span class="op">,</span> <span class="va">OSR</span>)<span class="op">;</span> <span class="co">% Noise Transfer Function (NTF)</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">%% Bode Plot</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="va">f</span> <span class="op">=</span> <span class="va">linspace</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="va">N</span><span class="op">/</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">1</span>)<span class="op">;</span> <span class="co">% Normalized frequency vector</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="va">z</span> <span class="op">=</span> <span class="va">exp</span>(<span class="fl">2i</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">*</span> <span class="va">f</span>)<span class="op">;</span>          <span class="co">% Frequency domain representation</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">f</span><span class="op">,</span> <span class="va">dbv</span>(<span class="va">evalTF</span>(<span class="va">H</span><span class="op">,</span> <span class="va">z</span>))<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Bode Plot of NTF (2nd Order)'</span>)<span class="op">;</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Normalized Frequency (f/fs)'</span>)<span class="op">;</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Magnitude (dB)'</span>)<span class="op">;</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">%% Realize DSM and Scale Coefficients</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>[<span class="va">a</span><span class="op">,</span> <span class="va">g</span><span class="op">,</span> <span class="va">b</span><span class="op">,</span> <span class="va">c</span>] <span class="op">=</span> <span class="va">realizeNTF</span>(<span class="va">H</span><span class="op">,</span> <span class="va">form</span>)<span class="op">;</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="va">b</span>(<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>) <span class="op">=</span> <span class="fl">0</span><span class="op">;</span> <span class="co">% Modify feedback path</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="va">ABCD</span> <span class="op">=</span> <span class="va">stuffABCD</span>(<span class="va">a</span><span class="op">,</span> <span class="va">g</span><span class="op">,</span> <span class="va">b</span><span class="op">,</span> <span class="va">c</span><span class="op">,</span> <span class="va">form</span>)<span class="op">;</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>[<span class="va">ABCDs</span><span class="op">,</span> <span class="va">umax</span>] <span class="op">=</span> <span class="va">scaleABCD</span>(<span class="va">ABCD</span>)<span class="op">;</span> <span class="co">% Scale the ABCD matrix</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co">%% Simulate DSM</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>[<span class="va">v</span><span class="op">,</span> <span class="va">xn</span><span class="op">,</span> <span class="va">xmax</span><span class="op">,</span> <span class="va">y</span>] <span class="op">=</span> <span class="va">simulateDSM</span>(<span class="va">u</span><span class="op">,</span> <span class="va">ABCDs</span>)<span class="op">;</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="co">%% Time-Domain Plot of DSM</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="va">set</span>(<span class="va">gca</span><span class="op">,</span> <span class="ss">'fontsize'</span><span class="op">,</span> <span class="fl">14</span>)<span class="op">;</span> <span class="co">% Set font size for readability</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot input signal (u)</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">t</span><span class="op">,</span> <span class="va">u</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a><span class="co">% Stair-step the quantized output (v)</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="va">stairs</span>(<span class="va">t</span><span class="op">,</span> <span class="va">v</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">off</span><span class="op">;</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="co">% Apply scaling as per the reference</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="va">min</span>(<span class="va">t</span>)<span class="op">,</span> <span class="va">max</span>(<span class="va">t</span>)<span class="op">/</span><span class="fl">8</span><span class="op">,</span> <span class="fl">1.1</span><span class="op">*</span><span class="va">min</span>(<span class="va">v</span>)<span class="op">,</span> <span class="fl">1.1</span><span class="op">*</span><span class="va">max</span>(<span class="va">v</span>)])<span class="op">;</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a><span class="co">% Add labels and title</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Time t/T'</span>)<span class="op">;</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Amplitude'</span>)<span class="op">;</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a><span class="va">legend</span>(<span class="ss">'u'</span><span class="op">,</span> <span class="ss">'v'</span><span class="op">,</span> <span class="ss">'Location'</span><span class="op">,</span> <span class="ss">'best'</span>)<span class="op">;</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'2nd Order \Sigma\Delta: Time-Domain Response'</span>)<span class="op">;</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="co">%% Spectral Analysis (FFT)</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a><span class="va">sq</span> <span class="op">=</span> <span class="va">abs</span>(<span class="va">fft</span>(<span class="va">v</span>))<span class="op">;</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a><span class="co">% Normalize and process FFT</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a><span class="va">f_fft</span> <span class="op">=</span> (<span class="fl">0</span><span class="op">:</span><span class="va">N</span><span class="op">/</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>) <span class="op">/</span> <span class="va">N</span><span class="op">;</span> <span class="co">% Frequency vector</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a><span class="va">sq_hlf</span> <span class="op">=</span> <span class="va">sq</span>(<span class="fl">1</span><span class="op">:</span><span class="va">N</span><span class="op">/</span><span class="fl">2</span>) <span class="op">*</span> <span class="fl">2</span> <span class="op">/</span> <span class="va">N</span><span class="op">;</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a><span class="va">sqdBFS</span> <span class="op">=</span> <span class="fl">20</span> <span class="op">*</span> <span class="va">log10</span>(<span class="va">sq_hlf</span>)<span class="op">;</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a><span class="va">sqdBFS</span>(<span class="va">sqdBFS</span> <span class="op">==</span> <span class="op">-</span><span class="va">Inf</span>) <span class="op">=</span> <span class="op">-</span><span class="fl">150</span><span class="op">;</span> <span class="co">% Correct log(0) issues</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a><span class="co">% Signal-to-Noise Ratio (SNR) Calculation</span></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a><span class="va">signal_bin</span> <span class="op">=</span> <span class="va">cycles</span> <span class="op">+</span> <span class="fl">1</span><span class="op">;</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a><span class="va">noise</span> <span class="op">=</span> [<span class="va">sq_hlf</span>(<span class="fl">1</span><span class="op">:</span><span class="va">signal_bin</span><span class="op">-</span><span class="fl">1</span>)<span class="op">,</span> <span class="va">sq_hlf</span>(<span class="va">signal_bin</span><span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span>)]<span class="op">;</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a><span class="va">snr</span> <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="va">log10</span>(<span class="va">sq_hlf</span>(<span class="va">signal_bin</span>)<span class="op">^</span><span class="fl">2</span> <span class="op">/</span> <span class="va">sum</span>(<span class="va">noise</span><span class="op">.^</span><span class="fl">2</span>))<span class="op">;</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot Spectral Analysis</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">f_fft</span><span class="op">,</span> <span class="va">sqdBFS</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="fl">0</span> <span class="fl">0.16</span> <span class="op">-</span><span class="fl">140</span> <span class="fl">0</span>])<span class="op">;</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a><span class="va">yticks</span>(<span class="op">-</span><span class="fl">140</span><span class="op">:</span><span class="fl">10</span><span class="op">:</span><span class="fl">0</span>)<span class="op">;</span> <span class="co">% Set Y-axis ticks from -150 to 0 in steps of 10</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>([<span class="ss">'Spectral Analysis (SNR = '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">snr</span><span class="op">,</span> <span class="ss">'%.2f'</span>)<span class="op">,</span> <span class="ss">' dB)'</span>])<span class="op">;</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Normalized Frequency (f/fs)'</span>)<span class="op">;</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Magnitude (dBFS)'</span>)<span class="op">;</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a><span class="co">%% Enhanced Pole-Zero Plot for Stability Visualization</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot the unit circle</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a><span class="va">theta</span> <span class="op">=</span> <span class="va">linspace</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">2</span><span class="op">*</span><span class="va">pi</span><span class="op">,</span> <span class="fl">500</span>)<span class="op">;</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">cos</span>(<span class="va">theta</span>)<span class="op">,</span> <span class="va">sin</span>(<span class="va">theta</span>)<span class="op">,</span> <span class="ss">'k--'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">1.5</span>)<span class="op">;</span> <span class="co">% Dashed unit circle</span></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot zeros and poles</span></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a><span class="va">scatter</span>(<span class="va">real</span>(<span class="va">H</span>.<span class="va">z</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="va">imag</span>(<span class="va">H</span>.<span class="va">z</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="ss">'bo'</span><span class="op">,</span> <span class="ss">'filled'</span><span class="op">,</span> <span class="ss">'DisplayName'</span><span class="op">,</span> <span class="ss">'Zeros'</span>)<span class="op">;</span> <span class="co">% Zeros</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a><span class="va">scatter</span>(<span class="va">real</span>(<span class="va">H</span>.<span class="va">p</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="va">imag</span>(<span class="va">H</span>.<span class="va">p</span>{<span class="fl">1</span>})<span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="ss">'rx'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="ss">'DisplayName'</span><span class="op">,</span> <span class="ss">'Poles'</span>)<span class="op">;</span> <span class="co">% Poles</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a><span class="co">% Add grid, axis equal, and labels</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">equal</span><span class="op">;</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Real Part'</span>)<span class="op">;</span></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Imaginary Part'</span>)<span class="op">;</span></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Enhanced Pole-Zero Plot with Stability Criterion'</span>)<span class="op">;</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a><span class="va">legend</span>(<span class="ss">'Unit Circle'</span><span class="op">,</span> <span class="ss">'Zeros'</span><span class="op">,</span> <span class="ss">'Poles'</span><span class="op">,</span> <span class="ss">'Location'</span><span class="op">,</span> <span class="ss">'best'</span>)<span class="op">;</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a><span class="co">% Annotate stability check</span></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="va">all</span>(<span class="va">abs</span>(<span class="va">H</span>.<span class="va">p</span>{<span class="fl">1</span>}) <span class="op">&lt;</span> <span class="fl">1</span>)</span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>    <span class="va">stability_msg</span> <span class="op">=</span> <span class="ss">'System is Stable (All poles inside the unit circle)'</span><span class="op">;</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>    <span class="va">color</span> <span class="op">=</span> <span class="ss">'g'</span><span class="op">;</span></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>    <span class="va">stability_msg</span> <span class="op">=</span> <span class="ss">'System is Unstable (Some poles outside the unit circle)'</span><span class="op">;</span></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>    <span class="va">color</span> <span class="op">=</span> <span class="ss">'r'</span><span class="op">;</span></span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a><span class="va">text</span>(<span class="op">-</span><span class="fl">1.5</span><span class="op">,</span> <span class="fl">1.2</span><span class="op">,</span> <span class="va">stability_msg</span><span class="op">,</span> <span class="ss">'FontSize'</span><span class="op">,</span> <span class="fl">12</span><span class="op">,</span> <span class="ss">'FontWeight'</span><span class="op">,</span> <span class="ss">'bold'</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> <span class="va">color</span>)<span class="op">;</span></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">off</span><span class="op">;</span></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a><span class="co">%% Windowed FFT (Hann Window)</span></span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a><span class="va">specHW</span> <span class="op">=</span> <span class="va">fft</span>(<span class="va">v</span> <span class="op">.*</span> <span class="va">ds_hann</span>(<span class="va">N</span>)) <span class="op">/</span> (<span class="va">N</span> <span class="op">/</span> <span class="fl">4</span>)<span class="op">;</span></span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="op">;</span></span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">f_fft</span><span class="op">,</span> <span class="va">dbv</span>(<span class="va">specHW</span>(<span class="fl">1</span><span class="op">:</span><span class="va">N</span><span class="op">/</span><span class="fl">2</span>))<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="fl">0</span> <span class="fl">0.16</span> <span class="op">-</span><span class="fl">140</span> <span class="fl">0</span>])<span class="op">;</span></span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a><span class="va">yticks</span>(<span class="op">-</span><span class="fl">140</span><span class="op">:</span><span class="fl">10</span><span class="op">:</span><span class="fl">0</span>)<span class="op">;</span> <span class="co">% Set Y-axis ticks from -150 to 0 in steps of 10</span></span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Windowed Spectral Analysis with Hann Window'</span>)<span class="op">;</span></span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Normalized Frequency (f/fs)'</span>)<span class="op">;</span></span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Magnitude (dBFS)'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="graphical-outputs-and-analysis-1" class="level3">
<h3 class="anchored" data-anchor-id="graphical-outputs-and-analysis-1">Graphical Outputs and Analysis</h3>
<section id="time-domain-response-1" class="level4">
<h4 class="anchored" data-anchor-id="time-domain-response-1">1. Time-Domain Response</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-42-ea3a6321-8227-41ec-baf3-e987338b35a2.png" class="img-fluid figure-img"></p>
<figcaption>Time-Domain Response</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot shows the input signal ((u)) and the quantized output signal ((v)) over time for the 2nd-order DSM.</li>
<li><strong>Observations</strong>:
<ul>
<li>The input signal ((u)) is a continuous sinewave.</li>
<li>The output ((v)) exhibits high-frequency quantization noise but maintains the general shape of (u).</li>
<li>Increased quantization granularity reflects enhanced noise shaping characteristics.</li>
</ul></li>
<li><strong>Significance</strong>: The time-domain response demonstrates how the 2nd-order DSM accurately tracks the input signal while minimizing low-frequency noise.</li>
</ul>
</section>
<section id="pole-zero-plot-with-stability-criterion-1" class="level4">
<h4 class="anchored" data-anchor-id="pole-zero-plot-with-stability-criterion-1">2. Pole-Zero Plot with Stability Criterion</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-35-d3699009-060e-4cf8-bf67-d70888df728f.png" class="img-fluid figure-img"></p>
<figcaption>Pole-Zero Plot</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot displays the locations of the poles and zeros of the NTF in the complex plane. The unit circle is included to assess stability.</li>
<li><strong>Observations</strong>:
<ul>
<li>The poles lie well within the unit circle, confirming system stability.</li>
<li>Zeros are strategically placed to ensure effective noise shaping in the frequency domain.</li>
<li>Stability message: <em>System is Stable (All poles inside the unit circle)</em>.</li>
</ul></li>
<li><strong>Significance</strong>: The pole-zero configuration ensures the modulator remains stable under the given parameters while providing optimal noise shaping performance.</li>
</ul>
</section>
<section id="spectral-analysis-1" class="level4">
<h4 class="anchored" data-anchor-id="spectral-analysis-1">3. Spectral Analysis</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-5-1a61635b-30a6-436b-81dc-7f2b51ac5efe.png" class="img-fluid figure-img"></p>
<figcaption>Spectral Analysis</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot shows the frequency-domain representation of the modulator’s output, with the signal and quantization noise plotted in decibels relative to full scale (dBFS).</li>
<li><strong>Observations</strong>:
<ul>
<li>A distinct peak at the test signal frequency represents the input sinewave.</li>
<li>Quantization noise is concentrated at higher frequencies, aligning with the noise shaping goal.</li>
<li>The calculated Signal-to-Noise Ratio (SNR) is approximately ( -4.89 , ), reflecting effective noise shaping.</li>
</ul></li>
<li><strong>Significance</strong>: The 2nd-order DSM achieves better noise suppression in the signal bandwidth than the 1st-order DSM, improving SNR.</li>
</ul>
</section>
<section id="bode-plot-of-noise-transfer-function-ntf-1" class="level4">
<h4 class="anchored" data-anchor-id="bode-plot-of-noise-transfer-function-ntf-1">4. Bode Plot of Noise Transfer Function (NTF)</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-37-da2857ec-31f7-495a-b62e-499a6f258d8c.png" class="img-fluid figure-img"></p>
<figcaption>Bode Plot</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot represents the magnitude response of the Noise Transfer Function (NTF) for the 2nd-order DSM. It highlights how the modulator attenuates quantization noise at different frequencies.</li>
<li><strong>Observations</strong>:
<ul>
<li>At lower frequencies (normalized frequency (f/fs)), the magnitude is close to 0 dB, indicating minimal noise within the signal bandwidth.</li>
<li>As frequency increases, the magnitude rises significantly, reflecting that quantization noise is aggressively pushed to higher frequencies outside the signal bandwidth.</li>
</ul></li>
<li><strong>Significance</strong>: The improved NTF of the 2nd-order DSM results in better noise shaping compared to the 1st-order DSM, enhancing overall signal quality.</li>
</ul>
</section>
<section id="windowed-spectral-analysis-with-hann-window-1" class="level4">
<h4 class="anchored" data-anchor-id="windowed-spectral-analysis-with-hann-window-1">5. Windowed Spectral Analysis with Hann Window</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-3-06c0e5b6-6267-45e7-a45a-a7884db3d929.png" class="img-fluid figure-img"></p>
<figcaption>Windowed Spectral Analysis with Hann Window</figcaption>
</figure>
</div>
<ul>
<li><strong>Description</strong>: This plot represents the frequency-domain analysis of the modulator’s output using a Hann window to minimize spectral leakage.</li>
<li><strong>Observations</strong>:
<ul>
<li>A sharp peak is visible at the test signal frequency.</li>
<li>Quantization noise is uniformly distributed across the spectrum due to the windowing effect.</li>
</ul></li>
<li><strong>Significance</strong>: The Hann window ensures accurate spectral representation, removing boundary artifacts caused by the FFT.</li>
</ul>
</section>
</section>
<section id="analysis-and-observations-1" class="level3">
<h3 class="anchored" data-anchor-id="analysis-and-observations-1">Analysis and Observations</h3>
<ol type="1">
<li>The <strong>2nd Order DSM</strong> achieves superior noise shaping, pushing quantization noise to even higher frequencies compared to the 1st-order DSM.</li>
<li>Stability is verified using the <strong>Pole-Zero Plot</strong>.</li>
<li>The <strong>Bode Plot</strong> confirms the frequency response aligns with expectations for a 2nd-order NTF.</li>
<li>The <strong>Time-Domain Response</strong> shows enhanced quantization and better tracking of the sine wave.</li>
<li>The <strong>Spectral Analysis</strong> validates improved SNR in the signal bandwidth.</li>
</ol>
</section>
</section>
<section id="first-order-delta-sigma-modulator-dsm---simulink-model" class="level2">
<h2 class="anchored" data-anchor-id="first-order-delta-sigma-modulator-dsm---simulink-model">First-Order Delta-Sigma Modulator (DSM) - Simulink Model</h2>
<section id="first-order-dsm-model-in-simulink" class="level3">
<h3 class="anchored" data-anchor-id="first-order-dsm-model-in-simulink">First-Order DSM Model in Simulink</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-36-d8f79962-81ce-4918-b38c-93f70f0cc50b.png" class="img-fluid figure-img"></p>
<figcaption>First-Order DSM Model in Simulink.png</figcaption>
</figure>
</div>
</section>
<section id="explanation-of-the-simulink-model" class="level3">
<h3 class="anchored" data-anchor-id="explanation-of-the-simulink-model">Explanation of the Simulink Model</h3>
<p>The model consists of the following key components:</p>
<ol type="1">
<li><strong>Input Signal (u):</strong> A sinusoidal input with:
<ul>
<li><strong>Frequency:</strong> 268.55 Hz (<strong>converted to rad/sec:</strong> 1687.14 rad/sec)</li>
<li><strong>Sample Time:</strong> 4.545e-6 sec (<strong>based on a 220 kHz sampling frequency</strong>)</li>
</ul></li>
<li><strong>Gain Blocks:</strong>
<ul>
<li><strong>b1 = 0.2665</strong>, <strong>a1 = 0.2665</strong> (feedback gain)</li>
<li><strong>c1 = 0.3418</strong> (forward path gain)</li>
<li>These values are optimized for <strong>stability and noise shaping</strong>.</li>
</ul></li>
<li><strong>Integrator (Transfer Function):</strong>
<ul>
<li><p>The transfer function used:</p>
<p><span class="math display">\[
H(z) = \frac{z^{-1}}{1 - z^{-1}}
\]</span></p></li>
<li><p>This represents a <strong>discrete-time integrator</strong>, which ensures <strong>noise shaping and improved quantization performance</strong>.</p></li>
</ul></li>
<li><strong>Relay (Quantizer):</strong>
<ul>
<li>The relay acts as a <strong>non-linear quantizer</strong>, which introduces <strong>quantization noise</strong> and simulates bitstream behavior.</li>
</ul></li>
<li><strong>Output (v &amp; Spectrum Analyzer):</strong>
<ul>
<li>The <strong>scope</strong> captures the modulator output.</li>
<li>The <strong>spectrum analyzer</strong> helps observe the <strong>quantization noise shaping</strong> effect.</li>
</ul></li>
</ol>
</section>
</section>
<section id="why-are-we-choosing-simulink-models-with-transfer-functions" class="level2">
<h2 class="anchored" data-anchor-id="why-are-we-choosing-simulink-models-with-transfer-functions">Why are we choosing Simulink models with Transfer Functions?</h2>
<p>While MATLAB scripting allows direct implementation of DSM using <strong>difference equations</strong>, Simulink with <strong>transfer functions</strong> is preferred for:</p>
<ul>
<li><strong>Graphical Representation:</strong> Easy to <strong>visualize the modulator structure</strong>.<br>
</li>
<li><strong>Modularity &amp; Flexibility:</strong> Components like <strong>integrators and quantizers can be independently analyzed</strong>.<br>
</li>
<li><strong>Accurate Simulation:</strong> Simulink provides <strong>precise time-domain behavior</strong> and <strong>noise shaping analysis</strong>.<br>
</li>
<li><strong>Parameter Tuning:</strong> Gains, sampling rates, and quantizer settings can be <strong>easily adjusted</strong>.<br>
</li>
<li><strong>Real-Time Performance Analysis:</strong> Enables <strong>direct visualization of spectrum analysis, quantization noise, and modulated output</strong>.</li>
</ul>
</section>
<section id="output-analysis" class="level2">
<h2 class="anchored" data-anchor-id="output-analysis">Output Analysis</h2>
<section id="spectrum-analysis-time-domain-plots" class="level3">
<h3 class="anchored" data-anchor-id="spectrum-analysis-time-domain-plots">Spectrum Analysis &amp; Time-Domain Plots</h3>
<section id="spectrum-analyzer-output" class="level4">
<h4 class="anchored" data-anchor-id="spectrum-analyzer-output">Spectrum Analyzer Output</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-23-74fa7ce3-0f9f-4e9e-8ff8-9b7268cbb3a2.png" class="img-fluid figure-img"></p>
<figcaption>Spectrum Analysis.png</figcaption>
</figure>
</div>
<p><em>Figure 2: Spectrum Analysis of DSM Output.</em> <strong>Observations:</strong> - <strong>Noise shaping</strong> is visible, where <strong>low-frequency noise is suppressed</strong> while <strong>Noise is pushed to high-frequency</strong>. - <strong>Signal power</strong> is <strong>26.63 dBm</strong>, showing successful quantization.</p>
</section>
<section id="time-domain-plots-scope-outputs" class="level4">
<h4 class="anchored" data-anchor-id="time-domain-plots-scope-outputs">Time-Domain Plots (Scope Outputs)</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-15-55ca4ee6-9480-453c-b286-f1f9b9d59d6b.png" class="img-fluid figure-img"></p>
<figcaption>Time-Domain Plot.png</figcaption>
</figure>
</div>
<p><strong>Observations:</strong> - The <strong>input sine wave</strong> remains smooth. - The <strong>integrator output</strong> accumulates values, forming a staircase-like waveform. - The <strong>quantized relay output</strong> exhibits <strong>binary levels</strong>, confirming Delta-Sigma Modulation.</p>
</section>
</section>
</section>
<section id="design" class="level2">
<h2 class="anchored" data-anchor-id="design">Design</h2>
<section id="input-signal-selection" class="level3">
<h3 class="anchored" data-anchor-id="input-signal-selection">1. Input Signal Selection</h3>
<ul>
<li>The input frequency is chosen as <strong>268.55 Hz</strong>, converted to <strong>1687.14 rad/sec</strong> for consistency in discrete-time analysis.</li>
<li>The <strong>sampling frequency is 220 kHz</strong>, ensuring a <strong>high oversampling ratio (OSR)</strong>, which is critical for <strong>effective noise shaping</strong>.</li>
<li>The <strong>sample time</strong> is calculated as: <span class="math display">\[
T_s = \frac{1}{f_s} = \frac{1}{220000} = 4.545 \times 10^{-6} \text{ sec}
\]</span> ensuring that the system operates well within <strong>Nyquist criteria</strong> and provides enough resolution for quantization noise shaping.</li>
</ul>
</section>
<section id="gain-selection-b1-a1-c1" class="level3">
<h3 class="anchored" data-anchor-id="gain-selection-b1-a1-c1">2. Gain Selection (<code>b1</code>, <code>a1</code>, <code>c1</code>)</h3>
<ul>
<li>Gains are chosen based on <strong>stability and performance trade-offs</strong>:
<ul>
<li><strong>b1 = 0.2665</strong>, <strong>a1 = 0.2665</strong>: Control the feedback loop, ensuring <strong>stable integration</strong> without excessive amplification.</li>
<li><strong>c1 = 0.3418</strong>: Affects the <strong>output scaling</strong>, ensuring the modulator operates within an optimal dynamic range.</li>
</ul></li>
<li>Proper gain selection <strong>balances the modulator performance</strong> by:
<ul>
<li>Avoiding <strong>integrator saturation</strong>.</li>
<li>Ensuring a <strong>sufficient signal-to-noise ratio (SNR)</strong>.</li>
<li>Enhancing <strong>quantization noise suppression</strong>.</li>
</ul></li>
</ul>
</section>
<section id="integrator-transfer-function" class="level3">
<h3 class="anchored" data-anchor-id="integrator-transfer-function">3. Integrator Transfer Function</h3>
<ul>
<li>The <strong>discrete-time integrator</strong> is represented by the <strong>transfer function</strong>: <span class="math display">\[
H(z) = \frac{z^{-1}}{1 - z^{-1}}
\]</span></li>
<li>This function is essential because:
<ul>
<li>It acts as a <strong>leaky accumulator</strong>, ensuring <strong>quantization noise is pushed to higher frequencies</strong>.</li>
<li>It <strong>enhances the low-frequency signal</strong>, making the system behave like an <strong>ideal noise-shaping filter</strong>.</li>
<li>The <strong>feedback mechanism</strong> in the loop compensates for <strong>quantization errors</strong>, improving <strong>modulator resolution</strong>.</li>
</ul></li>
</ul>
</section>
<section id="relay-as-quantizer" class="level3">
<h3 class="anchored" data-anchor-id="relay-as-quantizer">4. Relay as Quantizer</h3>
<ul>
<li>The <strong>Relay block</strong> is used to perform <strong>non-linear quantization</strong>, simulating the behavior of an <strong>ADC</strong>.</li>
<li>Key reasons for using a relay-based quantizer:
<ul>
<li>It <strong>simplifies the DSM architecture</strong>, making it suitable for <strong>low-power applications</strong>.</li>
<li>Converts the continuous signal into a <strong>binary output (bitstream)</strong> required for <strong>oversampled ADCs</strong>.</li>
<li>Introduces <strong>controlled non-linearity</strong>, ensuring proper <strong>error feedback and noise shaping</strong>.</li>
</ul></li>
<li>The relay effectively models <strong>real-world quantization effects</strong>, making the <strong>Simulink model closely resemble practical DSM implementations</strong>.</li>
</ul>
</section>
</section>
<section id="second-order-delta-sigma-modulator-dsm---simulink-model" class="level2">
<h2 class="anchored" data-anchor-id="second-order-delta-sigma-modulator-dsm---simulink-model">Second-Order Delta-Sigma Modulator (DSM) - Simulink Model</h2>
<p>A <strong>second-order DSM introduces two integrators in the loop</strong>, significantly improving <strong>noise shaping characteristics</strong> and <strong>reducing in-band quantization noise</strong>.</p>
<section id="why-move-to-a-second-order-dsm" class="level3">
<h3 class="anchored" data-anchor-id="why-move-to-a-second-order-dsm">Why Move to a Second-Order DSM?</h3>
<p>The primary reasons for increasing the order of the DSM are:</p>
<p><strong>Enhanced Noise Shaping:</strong> A <strong>first-order DSM pushes noise to higher frequencies with a slope of -20 dB/decade</strong>, whereas a <strong>second-order DSM achieves -40 dB/decade</strong>, providing <strong>superior noise suppression</strong> in the signal band.</p>
<p><strong>Higher Signal-to-Noise Ratio (SNR):</strong> The <strong>second-order DSM increases the effective number of bits (ENOB)</strong>, improving resolution and dynamic range.</p>
<p><strong>Better Performance for Low-Frequency Signals:</strong> The second-order DSM minimizes <strong>low-frequency quantization noise</strong>, making it ideal for <strong>high-precision ADC applications</strong>.</p>
<p><strong>Trade-Offs:</strong> While a higher-order DSM improves performance, it can introduce <strong>stability concerns</strong>, which require <strong>careful gain selection</strong>.</p>
</section>
<section id="design-of-second-order-dsm-model-in-simulink" class="level3">
<h3 class="anchored" data-anchor-id="design-of-second-order-dsm-model-in-simulink">Design of Second-Order DSM Model in Simulink</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-41-e83e4eab-71e2-41c2-84a8-1e3f1822d22b.png" class="img-fluid figure-img"></p>
<figcaption>Second-Order DSM Model in Simulink</figcaption>
</figure>
</div>
</section>
<section id="explanation-of-the-simulink-model-1" class="level3">
<h3 class="anchored" data-anchor-id="explanation-of-the-simulink-model-1">Explanation of the Simulink Model</h3>
<p>The model consists of the following key components:</p>
<ol type="1">
<li><strong>Input Signal (u):</strong> A sinusoidal input with:
<ul>
<li><strong>Frequency:</strong> 268.55 Hz (<strong>converted to rad/sec:</strong> 1687.14 rad/sec)</li>
<li><strong>Sample Time:</strong> 4.545e-6 sec (<strong>based on a 220 kHz sampling frequency</strong>)</li>
</ul></li>
<li><strong>Gain Blocks:</strong>
<ul>
<li><strong>b1 = 0.2665</strong>, <strong>a1 = 0.2665</strong> (feedback gain)</li>
<li><strong>c1 = 0.3418</strong> (forward path gain)</li>
<li><strong>a2 = 0.2385</strong>, <strong>c2 = 5.18</strong> (additional gains for second-order integration)</li>
<li>These values are optimized to <strong>ensure stability while achieving superior noise shaping</strong>.</li>
</ul></li>
<li><strong>Two Integrators (Transfer Functions):</strong>
<ul>
<li><p>Each integrator uses the <strong>discrete transfer function</strong>:</p>
<p><span class="math display">\[
H(z) = \frac{z^{-1}}{1 - z^{-1}}
\]</span></p></li>
<li><p>The two integrators <strong>accumulate</strong> the quantization noise, shaping it more aggressively than in a first-order DSM.</p></li>
</ul></li>
<li><strong>Relay (Quantizer):</strong>
<ul>
<li>The relay acts as a <strong>non-linear quantizer</strong>, introducing <strong>quantization noise</strong> while simulating a <strong>bitstream output</strong>.</li>
</ul></li>
<li><strong>Output (v &amp; Spectrum Analyzer):</strong>
<ul>
<li>The <strong>scope captures</strong> the modulator output.</li>
<li>The <strong>spectrum analyzer visualizes</strong> the quantization noise distribution.</li>
</ul></li>
</ol>
</section>
</section>
<section id="why-we-are-using-these-gain-values" class="level2">
<h2 class="anchored" data-anchor-id="why-we-are-using-these-gain-values">Why We Are Using These Gain Values?</h2>
<p>In a second-order DSM, proper gain selection ensures <strong>stability and optimal noise shaping</strong>:</p>
<ul>
<li><strong>b1 = 0.2665, a1 = 0.2665:</strong> Maintains stability in the <strong>feedback loop</strong>, preventing integrator saturation.</li>
<li><strong>c1 = 0.3418:</strong> Balances the <strong>signal amplitude</strong> within the <strong>quantizer’s range</strong>.</li>
<li><strong>a2 = 0.2385, c2 = 5.18:</strong>
<ul>
<li><strong>a2 adjusts the second integrator’s feedback strength</strong>, preventing excessive noise amplification.</li>
<li><strong>c2 boosts the high-frequency noise shaping</strong>, further reducing in-band quantization noise.</li>
</ul></li>
</ul>
<p>The <strong>goal</strong> is to shape the <strong>quantization noise more aggressively</strong>, ensuring that most of it is pushed out of the <strong>signal band</strong>.</p>
</section>
<section id="output-analysis-1" class="level2">
<h2 class="anchored" data-anchor-id="output-analysis-1">Output Analysis</h2>
<section id="spectrum-analysis-time-domain-plots-1" class="level3">
<h3 class="anchored" data-anchor-id="spectrum-analysis-time-domain-plots-1">Spectrum Analysis &amp; Time-Domain Plots</h3>
<section id="spectrum-analyzer-output-1" class="level4">
<h4 class="anchored" data-anchor-id="spectrum-analyzer-output-1">Spectrum Analyzer Output</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-9-34b7b1d1-d2a5-4150-958d-c00fbba90b21.png" class="img-fluid figure-img"></p>
<figcaption>Spectrum Analysis.png</figcaption>
</figure>
</div>
<p><strong>Observations:</strong> - Compared to the first-order DSM, the <strong>quantization noise suppression is more effective</strong>. - <strong>Steeper noise shaping (-40 dB/decade)</strong> is visible, reducing noise in the signal band. - The <strong>signal power remains stable</strong>, ensuring correct modulation.</p>
</section>
<section id="time-domain-plots-scope-outputs-1" class="level4">
<h4 class="anchored" data-anchor-id="time-domain-plots-scope-outputs-1">Time-Domain Plots (Scope Outputs)</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-45-fbd8a7ad-2f39-489f-8d22-5bd8612249b6.png" class="img-fluid figure-img"></p>
<figcaption>Time-Domain Plot.png</figcaption>
</figure>
</div>
<p><em>Figure 3: Time-Domain Plots of Input, Integrator Outputs, and Quantized Output.</em></p>
<p><strong>Observations:</strong> - The <strong>integrator outputs show a more gradual accumulation of noise</strong>. - The <strong>quantized output is more refined</strong>, indicating reduced quantization error. - The <strong>relay output transitions more smoothly</strong>, improving <strong>bitstream quality</strong>.</p>
</section>
</section>
</section>
<section id="design-justifications" class="level2">
<h2 class="anchored" data-anchor-id="design-justifications">Design Justifications</h2>
<section id="noise-shaping-improvement" class="level3">
<h3 class="anchored" data-anchor-id="noise-shaping-improvement">1. Noise Shaping Improvement</h3>
<p>A <strong>first-order DSM</strong> shifts noise at <strong>-20 dB/decade</strong>, while a <strong>second-order DSM</strong> shifts it at <strong>-40 dB/decade</strong>. This means:</p>
<ul>
<li><strong>More noise is pushed outside the signal band.</strong></li>
<li><strong>Higher effective resolution in the signal band.</strong></li>
<li><strong>Better SNR and ADC accuracy.</strong></li>
</ul>
</section>
<section id="gain-selection-b1-a1-c1-a2-c2" class="level3">
<h3 class="anchored" data-anchor-id="gain-selection-b1-a1-c1-a2-c2">2. Gain Selection (<code>b1</code>, <code>a1</code>, <code>c1</code>, <code>a2</code>, <code>c2</code>)**</h3>
<ul>
<li><strong>a2 and c2 are crucial</strong> for controlling the <strong>second-order integration</strong>.</li>
<li><strong>If a2 is too large</strong>, the system may become <strong>unstable</strong>.</li>
<li><strong>c2 enhances high-frequency noise shaping</strong>, reducing <strong>low-frequency quantization noise</strong>.</li>
</ul>
</section>
<section id="two-integrator-transfer-functions" class="level3">
<h3 class="anchored" data-anchor-id="two-integrator-transfer-functions">3. Two Integrator Transfer Functions</h3>
<ul>
<li>The <strong>two discrete integrators</strong> provide an extra level of noise shaping.</li>
<li>They ensure that <strong>low-frequency components are preserved</strong>, while <strong>quantization noise is heavily attenuated</strong>.</li>
</ul>
</section>
<section id="relay-as-quantizer-1" class="level3">
<h3 class="anchored" data-anchor-id="relay-as-quantizer-1">4. Relay as Quantizer</h3>
<ul>
<li>The <strong>Relay block remains the same</strong>, performing <strong>binary quantization</strong>.</li>
<li>The <strong>improved noise shaping ensures cleaner quantized output</strong>, beneficial for <strong>ADC applications</strong>.</li>
</ul>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The <em>First-Order and Second-Order Delta-Sigma Modulator (DSM) Simulink models</em> have provided valuable insights into <em>oversampling, noise shaping, and quantization effects</em>.</p>
<p>Through Simulink, we have visualized how <em>increasing the order of a DSM significantly improves quantization noise suppression</em>, making it easier to analyze and optimize system parameters.</p>
<section id="key-learnings-from-first-order-vs.-second-order-dsm" class="level3">
<h3 class="anchored" data-anchor-id="key-learnings-from-first-order-vs.-second-order-dsm">Key Learnings from First-Order vs.&nbsp;Second-Order DSM:</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 40%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th><em>First-Order DSM</em></th>
<th><em>Second-Order DSM</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Noise Shaping</em></td>
<td><em>-20 dB/decade</em> (Moderate shaping)</td>
<td><em>-40 dB/decade</em> (Sharper noise shaping)</td>
</tr>
<tr class="even">
<td><em>Quantization Noise Reduction</em></td>
<td>Limited suppression in the signal band</td>
<td>More effective suppression, better signal fidelity</td>
</tr>
<tr class="odd">
<td><em>Signal-to-Noise Ratio (SNR)</em></td>
<td>Moderate</td>
<td>Higher SNR, improved ADC resolution</td>
</tr>
<tr class="even">
<td><em>Number of Integrators</em></td>
<td><em>One</em> (single-stage integration)</td>
<td><em>Two</em> (cascaded integration for stronger shaping)</td>
</tr>
<tr class="odd">
<td><em>Bitstream Quality</em></td>
<td>Good</td>
<td>Better, with smoother transitions</td>
</tr>
<tr class="even">
<td><em>Complexity</em></td>
<td>Simple, easy to design and analyze</td>
<td>Slightly more complex but significantly better performance</td>
</tr>
<tr class="odd">
<td><em>Stability</em></td>
<td>Stable under normal conditions</td>
<td>Can become unstable if gains are not chosen carefully</td>
</tr>
</tbody>
</table>
</section>
<section id="fundamental-understanding-from-both-models" class="level3">
<h3 class="anchored" data-anchor-id="fundamental-understanding-from-both-models">Fundamental Understanding from Both Models</h3>
<ul>
<li><em>Noise shaping is the key technique in DSM, and increasing the order improves noise suppression.</em><br>
</li>
<li><em>The second-order DSM provides steeper noise shaping (-40 dB/decade vs.&nbsp;-20 dB/decade in first-order).</em><br>
</li>
<li><em>Higher-order DSMs improve SNR and ADC accuracy but require careful gain tuning for stability.</em><br>
</li>
<li><em>Simulink allows modular and visual analysis, making it easier to optimize system parameters.</em></li>
</ul>
</section>
<section id="final-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h3>
<p>The transition from a first-order to a second-order DSM highlights the trade-off between complexity and performance. While the first-order DSM introduces noise shaping, the second-order DSM refines it, achieving superior noise suppression and higher resolution.</p>
</section>
</section>
</section>
<section id="practical-analysis-of-delta-sigma-adcs-using-ltspice" class="level1">
<h1>Practical Analysis of Delta-Sigma ADCs using LTspice</h1>
<section id="simulation-approach" class="level2">
<h2 class="anchored" data-anchor-id="simulation-approach">Simulation Approach</h2>
<ol type="1">
<li><strong>1st Order Modulator</strong>:
<ul>
<li>Designed with a single integrator, 1-bit quantizer, and feedback loop.</li>
<li>Simulated with a 80 Hz sine wave input and oversampling clock.</li>
</ul></li>
<li><strong>2nd Order Modulator</strong>:
<ul>
<li>Designed with dual integrators, 1-bit quantizer, and feedback loop.</li>
<li>Simulated under the same conditions for comparison.</li>
</ul></li>
</ol>
</section>
<section id="simulation-and-output" class="level2">
<h2 class="anchored" data-anchor-id="simulation-and-output">Simulation and Output</h2>
<ol type="1">
<li><strong>1st Order Modulator</strong>:</li>
</ol>
<p><strong>Circuit Diagram</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-29-a4b3737b-94b1-433b-b1fc-2b7d13ba37b1.png" class="img-fluid figure-img"></p>
<figcaption>1st Order Delta Sigma Modulator</figcaption>
</figure>
</div>
<p>The DSM1 circuit comprises the following key components:</p>
<ul>
<li><strong>Input Stage:</strong> A sample-and-hold circuit controlled by non-overlapping clock signals (<code>phi1</code> and <code>phi2</code>) samples the input signal (<code>Vin</code>).</li>
<li><strong>Integrator:</strong> An op-amp integrator integrates the sampled input signal, generating an output voltage (<code>vx1</code>).</li>
<li><strong>Quantizer:</strong> A comparator compares the integrator output (<code>vx1</code>) to a reference voltage (<code>VCM</code>) and produces a 1-bit digital output (<code>vq</code>).</li>
<li><strong>Feedback Loop:</strong> The quantized output (<code>vq</code>) is fed back to the input stage, influencing the subsequent integration process.</li>
</ul>
<p><strong>Output Waveform Analysis</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-12-46a057ff-43a1-410b-829b-68864b797b93.png" class="img-fluid figure-img"></p>
<figcaption>Transient Analysis of 1st Order Delta Sigma Modulator</figcaption>
</figure>
</div>
<p>The simulated output waveform reveals the following:</p>
<ul>
<li><strong>Input Signal:</strong> The input signal (<code>Vin</code>) is a sine wave, representing the analog input to the DSM1.</li>
<li><strong>Integrator Output:</strong> The integrator output (<code>vx1</code>) is a ramp-like waveform that increases and decreases in response to the input signal. The slope of the ramp is determined by the input signal’s amplitude and polarity.</li>
<li><strong>Quantized Output:</strong> The quantized output (<code>vq</code>) is a digital signal that switches between two levels (high and low). This digital output represents the quantized version of the input signal.</li>
</ul>
<p><strong>DSM1 Operation</strong></p>
<p>The DSM1 operates as follows:</p>
<ul>
<li><strong>Sampling:</strong> The input signal is sampled at regular intervals determined by the clock signals <code>phi1</code> and <code>phi2</code>.</li>
<li><strong>Integration:</strong> The sampled input signal is integrated by the op-amp, resulting in a ramp-like voltage at the integrator’s output.</li>
<li><strong>Quantization:</strong> The comparator compares the integrator’s output to the reference voltage. If the integrator’s output exceeds the reference, the comparator output goes high; otherwise, it stays low.</li>
<li><strong>Feedback:</strong> The quantized output is fed back to the input stage, influencing the subsequent integration process and contributing to noise shaping.</li>
</ul>
<p><strong>Noise Shaping</strong></p>
<p>The DSM1 employs noise shaping to improve its resolution. Noise shaping pushes the quantization noise to higher frequencies, allowing the signal of interest to be more accurately represented at lower frequencies.</p>
<p><strong>Conclusion</strong></p>
<p>The analysis demonstrates the fundamental operation of a 1st-order Delta-Sigma Modulator. The circuit effectively converts the analog input signal into a digital representation using integration, quantization, and feedback. The noise shaping technique inherent in the DSM1 architecture allows for improved resolution and signal fidelity.</p>
<ol start="2" type="1">
<li><strong>2nd Order Modulator</strong>:</li>
</ol>
<p><strong>Circuit Diagram</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-21-6a4cbe8a-7039-4aad-934f-730c82e55cf8.png" class="img-fluid figure-img"></p>
<figcaption>2nd Order Delta Sigma Modulator</figcaption>
</figure>
</div>
<p>The DSM2 circuit consists of the following key elements:</p>
<ul>
<li><strong>Input Stage:</strong> A sample-and-hold circuit, controlled by non-overlapping clock signals (<code>phi1</code> and <code>phi2</code>), samples the input signal (<code>Vin</code>).</li>
<li><strong>First Integrator:</strong> An op-amp integrator integrates the sampled input signal, generating an output voltage (<code>vx1</code>).</li>
<li><strong>Second Integrator:</strong> A second op-amp integrator integrates the output of the first integrator (<code>vx1</code>), producing a second integrated signal (<code>vx2</code>).</li>
<li><strong>Quantizer:</strong> A comparator compares the output of the second integrator (<code>vx2</code>) to a reference voltage (<code>VCM</code>) and generates a 1-bit digital output (<code>vq</code>).</li>
<li><strong>Feedback Loop:</strong> The quantized output (<code>vq</code>) is fed back to the input of the first integrator through a switch controlled by <code>phi1</code> and <code>phi2</code>. This feedback loop plays a crucial role in noise shaping and overall performance.</li>
</ul>
<p><strong>Output Waveform Analysis</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-20-651a0fe8-dd42-4763-b9f4-50806f6e1242.png" class="img-fluid figure-img"></p>
<figcaption>Transient Analysis of 2nd Order Delta Sigma Modulator</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Input Signal (Vin):</strong> This is the original analog input signal to the DSM2. It can be any arbitrary waveform, but for simplicity, we consider a sine wave.</p></li>
<li><p><strong>Integrator Outputs:</strong></p>
<ul>
<li><strong>vx1 (Output of the First Integrator):</strong>
<ul>
<li>Expected to exhibit a ramp-like behavior.</li>
<li>The slope of the ramp will depend on the amplitude and polarity of the input signal.</li>
<li>Noise will be present due to the quantization process and the inherent noise of the op-amp.</li>
</ul></li>
<li><strong>vx2 (Output of the Second Integrator):</strong>
<ul>
<li>Will have a smoother waveform compared to vx1 due to the second integration stage.</li>
<li>Noise levels should be further reduced compared to the first integrator’s output.</li>
<li>The waveform may exhibit more complex shapes depending on the input signal and circuit parameters.</li>
</ul></li>
</ul></li>
<li><p><strong>Quantized Output (vq):</strong></p>
<ul>
<li>This is the primary output of the DSM2.</li>
<li>It’s a digital signal switching between two levels (e.g., ‘0’ and ‘1’ or ‘high’ and ‘low’).</li>
<li>This bitstream represents the quantized version of the input signal.</li>
<li>Due to the noise shaping, the bitstream will appear more random and contain less low-frequency noise compared to a 1st-order DSM.</li>
</ul></li>
</ul>
<p><strong>DSM2 Operation</strong></p>
<p>The DSM2 operates as follows:</p>
<ol type="1">
<li><strong>Sampling:</strong> The input signal (<code>Vin</code>) is sampled at regular intervals determined by the clock signals <code>phi1</code> and <code>phi2</code>.</li>
<li><strong>First-Stage Integration:</strong> The sampled input signal is integrated by the first op-amp, resulting in a ramp-like voltage (<code>vx1</code>) at its output.</li>
<li><strong>Second-Stage Integration:</strong> The output of the first integrator (<code>vx1</code>) is further integrated by the second op-amp, generating a second-order integrated signal (<code>vx2</code>).</li>
<li><strong>Quantization:</strong> The comparator compares the output of the second integrator (<code>vx2</code>) to the reference voltage (<code>VCM</code>). If <code>vx2</code> exceeds <code>VCM</code>, the comparator output (<code>vq</code>) goes high; otherwise, it stays low.</li>
<li><strong>Feedback:</strong> The quantized output (<code>vq</code>) is fed back to the input stage, influencing the subsequent integration process and contributing to noise shaping.</li>
</ol>
<p><strong>Noise Shaping</strong></p>
<ul>
<li>The 2nd-order DSM’s key advantage is its enhanced noise shaping.</li>
<li>The cascading of two integrators pushes quantization noise to higher frequencies.</li>
<li>This means that the noise in the output bitstream is concentrated at frequencies above the signal band of interest.</li>
<li>This noise shaping is crucial for achieving higher resolution and improved dynamic range.</li>
</ul>
<p><strong>Advantages of 2nd-Order DSM</strong></p>
<ul>
<li><strong>Higher Resolution:</strong> Due to improved noise shaping, the 2nd-order DSM generally achieves higher resolution compared to the 1st-order design.</li>
<li><strong>Enhanced Performance:</strong> The 2nd-order architecture provides better dynamic range and lower distortion.</li>
</ul>
</section>
<section id="conclusion-1" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-1">Conclusion</h2>
<p>The 2nd-order Delta-Sigma Modulator is a sophisticated architecture that offers significant advantages over its 1st-order counterpart. By employing two cascaded integrators, it achieves enhanced noise shaping, higher resolution, and improved overall performance. The analysis and simulation of the DSM2 circuit are crucial for understanding its behavior, optimizing its design, and achieving desired performance in practical applications.</p>
</section>
<section id="findings" class="level2">
<h2 class="anchored" data-anchor-id="findings">Findings</h2>
<section id="st-order-delta-sigma-modulator-1" class="level3">
<h3 class="anchored" data-anchor-id="st-order-delta-sigma-modulator-1">1st Order Delta-Sigma Modulator</h3>
<ul>
<li><strong>Performance</strong>:
<ul>
<li>Moderate noise shaping observed.</li>
<li>Suitable for low-resolution applications.</li>
</ul></li>
<li><strong>Challenges</strong>:
<ul>
<li>Limited noise suppression at higher frequencies.</li>
</ul></li>
<li><strong>Industry Applications</strong>:
<ul>
<li>Audio ADCs (e.g., Texas Instruments PCM1808).</li>
<li>Low-power sensor interfaces.</li>
</ul></li>
</ul>
</section>
<section id="nd-order-delta-sigma-modulator-1" class="level3">
<h3 class="anchored" data-anchor-id="nd-order-delta-sigma-modulator-1">2nd Order Delta-Sigma Modulator</h3>
<ul>
<li><strong>Performance</strong>:
<ul>
<li>Improved noise shaping compared to 1st order.</li>
<li>Higher resolution achieved.</li>
</ul></li>
<li><strong>Challenges</strong>:
<ul>
<li>Increased complexity and stability concerns.</li>
</ul></li>
<li><strong>Industry Applications</strong>:
<ul>
<li>Precision measurement equipment.</li>
<li>High-resolution data acquisition systems.</li>
</ul></li>
</ul>
</section>
<section id="comparison-of-1st-and-2nd-order-modulators" class="level3">
<h3 class="anchored" data-anchor-id="comparison-of-1st-and-2nd-order-modulators">Comparison of 1st and 2nd Order Modulators</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Feature</th>
<th>1st Order Modulator</th>
<th>2nd Order Modulator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Noise Shaping</strong></td>
<td>Moderate</td>
<td>Improved</td>
</tr>
<tr class="even">
<td><strong>Complexity</strong></td>
<td>Low</td>
<td>Higher</td>
</tr>
<tr class="odd">
<td><strong>Stability</strong></td>
<td>More stable</td>
<td>Less stable</td>
</tr>
<tr class="even">
<td><strong>Applications</strong></td>
<td>Low-resolution ADCs</td>
<td>High-resolution ADCs</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="industry-applications-and-case-studies" class="level2">
<h2 class="anchored" data-anchor-id="industry-applications-and-case-studies">Industry Applications and Case Studies</h2>
<section id="audio-processing" class="level3">
<h3 class="anchored" data-anchor-id="audio-processing">Audio Processing</h3>
<ul>
<li>Delta-Sigma ADCs are extensively used in audio applications due to their high resolution and noise shaping capabilities.</li>
<li>Example: Texas Instruments’ <strong>PCM1808</strong> audio ADC.</li>
</ul>
</section>
<section id="precision-measurement" class="level3">
<h3 class="anchored" data-anchor-id="precision-measurement">Precision Measurement</h3>
<ul>
<li>High-order Delta-Sigma ADCs are employed in multimeters and data acquisition systems for accurate signal measurement.</li>
<li>Example: Analog Devices’ <strong>AD7124-8</strong> precision ADC.</li>
</ul>
</section>
<section id="sensor-interfaces" class="level3">
<h3 class="anchored" data-anchor-id="sensor-interfaces">Sensor Interfaces</h3>
<ul>
<li>Industrial sensors, such as temperature and pressure sensors, often use Delta-Sigma ADCs for high-resolution signal conversion.</li>
<li>Example: Maxim Integrated’s <strong>MAX11270</strong> for industrial sensor applications.</li>
</ul>
</section>
</section>
<section id="challenges-and-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="challenges-and-recommendations">Challenges and Recommendations</h2>
<section id="challenges" class="level3">
<h3 class="anchored" data-anchor-id="challenges">Challenges</h3>
<ol type="1">
<li><strong>Stability</strong>:
<ul>
<li>Higher-order modulators are prone to instability.</li>
<li>Requires careful design and tuning.</li>
</ul></li>
<li><strong>Complexity</strong>:
<ul>
<li>Increased component count and design complexity for 2nd order modulators.</li>
</ul></li>
<li><strong>Clock Jitter</strong>:
<ul>
<li>High clock frequencies can introduce jitter, affecting performance.</li>
</ul></li>
</ol>
</section>
</section>
</section>
<section id="design-and-analysis-of-a-5-transistor-ota-in-ltspice" class="level1">
<h1>Design and Analysis of a 5-Transistor OTA in LTSpice</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Here we present the design, simulation, and analysis of a <strong>5-Transistor Operational Transconductance Amplifier (5T OTA)</strong>. The OTA was implemented in <strong>LTSpice</strong> using the <strong>130nm bulk technology library</strong> provided by Hochschule Kempten. The primary objective was to replace the <strong>integrator opamp</strong> in the Delta-Sigma Modulator with the designed OTA and evaluate its performance.</p>
</section>
<section id="ota-design-and-implementation" class="level2">
<h2 class="anchored" data-anchor-id="ota-design-and-implementation">OTA Design and Implementation</h2>
<p>The design of the <strong>5T OTA</strong> was based on the methodologies outlined in the <a href="https://iic-jku.github.io/analog-circuit-design/#sec-basic-ota">Analog Circuit Design</a> resource from Johannes Kepler University Linz. This reference provided essential guidelines for <strong>transistor sizing</strong> and <strong>biasing strategies</strong>.</p>
<p>The OTA topology consists of: - <strong>Input Differential Pair:</strong> - M1 &amp; M2 (NMOS) – Convert input voltage difference into a current signal. - <strong>Current Mirror Load:</strong> - M5 &amp; M6 (PMOS) – Implement a current mirror for a high-impedance load. - <strong>Tail Current Source &amp; Biasing:</strong> - M3 &amp; M4 (NMOS) – Provide tail current biasing for differential pair stability. - I1 – 20µA constant current source for biasing reference.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-6-2bcce6a8-893d-48f7-ab9a-552db4fadc75.png" class="img-fluid figure-img"></p>
<figcaption>5T OTA</figcaption>
</figure>
</div>
<section id="ltspice-subcircuit-for-5t-ota" class="level3">
<h3 class="anchored" data-anchor-id="ltspice-subcircuit-for-5t-ota">LTSpice Subcircuit for 5T OTA</h3>
<pre class="spice"><code>.subckt ota_basic vdd Vinn Vinp vss Vout
I1 vdd N003 20µ
M1 N001 Vinp N002 0 NMOS l=5u w=2u
M2 Vout Vinn N002 0 NMOS l=5u w=2u
M3 N002 N003 vss vss NMOS l=5u w=0.5u
M4 N003 N003 vss vss NMOS l=5u w=2.5u
M5 N001 N001 vdd vdd PMOS l=5u w=1.5u
M6 Vout N001 vdd vdd PMOS l=5u w=1.5u
.ends ota_basic</code></pre>
</section>
</section>
<section id="performance-in-different-applications" class="level2">
<h2 class="anchored" data-anchor-id="performance-in-different-applications">Performance in Different Applications</h2>
<section id="simple-comparator" class="level3">
<h3 class="anchored" data-anchor-id="simple-comparator">Simple Comparator</h3>
<ol type="1">
<li>The OTA worked effectively, providing clear high/low transitions. <img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-1-03207af6-263e-4e55-a1b1-2fdae16ca329.png" class="img-fluid" alt="Simple Comparator with 5T OTA and it’s transient analysis"> 2. DSM1 Circuit The OTA <strong>performed nearly identically</strong> to an ideal opamp, making it a viable replacement. <img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-30-a5063411-e324-431f-8bf8-a5b188bd4780.png" class="img-fluid" alt="DSM1 circuit with 5T OTA replacing the Integrator Opamp"> 3. Comparison <img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-26-888f24ff-476e-43fe-b3e8-5369d38dfd21.png" class="img-fluid" alt="Transient analysis of DSM1 with replaced Integrator Opamp"></li>
</ol>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 37%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Ideal Op-Amp Integrator</th>
<th>5T OTA Integrator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Integrator Output</td>
<td>Linear, clean ramp</td>
<td>Distorted, noisy, limited swing</td>
</tr>
<tr class="even">
<td>Comparator Output</td>
<td>Sharp, clean digital signal</td>
<td>Noisy, jittery transitions</td>
</tr>
<tr class="odd">
<td>Noise</td>
<td>Minimal</td>
<td>Significant</td>
</tr>
<tr class="even">
<td>Signal Swing</td>
<td>Larger, utilizes full range</td>
<td>Limited</td>
</tr>
<tr class="odd">
<td>Linearity</td>
<td>Excellent</td>
<td>Poor</td>
</tr>
</tbody>
</table>
<section id="analysis" class="level4">
<h4 class="anchored" data-anchor-id="analysis">Analysis</h4>
<p>The significant difference in performance arises from the non-ideal characteristics of the 5T OTA compared to the ideal op-amp:</p>
<ul>
<li><strong>Finite Gain and Bandwidth:</strong> The 5T OTA has limited gain and bandwidth, leading to non-ideal integration behavior and reduced signal swing.</li>
<li><strong>Non-Linearities:</strong> The 5T OTA exhibits non-linearities, especially for larger signal swings, distorting the integrated waveform.</li>
<li><strong>Noise:</strong> The 5T OTA is more susceptible to noise due to factors like transistor mismatch and thermal noise, resulting in a noisy comparator output.</li>
</ul>
</section>
<section id="nearly-the-same-digital-output" class="level4">
<h4 class="anchored" data-anchor-id="nearly-the-same-digital-output">“Nearly the Same” Digital Output</h4>
<p>While the <em>general</em> pattern of the digital output (V(vq) or V(Vx1)) appears similar in some respects (especially when considering long timescales or slowly varying inputs), a detailed examination reveals significant performance degradation with the 5T OTA:</p>
<ul>
<li><strong>Average Switching Frequency:</strong> The average switching frequency might be close, but the <em>instantaneous</em> switching times are much more irregular and noisy.</li>
<li><strong>Noise and Distortion:</strong> Even if the pulse <em>density</em> seems similar, the noise and jitter in the 5T OTA output will severely impact the accuracy of the digital representation. This noise will be apparent in the frequency spectrum.</li>
<li><strong>Performance Metrics:</strong> Metrics like SNR and THD will be drastically worse with the 5T OTA.</li>
</ul>
</section>
</section>
<section id="dsm2-circuit" class="level3">
<h3 class="anchored" data-anchor-id="dsm2-circuit">DSM2 Circuit</h3>
<p>The OTA <strong>failed to meet performance requirements</strong>. DSM2, being a second-order modulator, has an additional level of feedback and increased complexity in its loop dynamics. A higher gain is often needed to maintain the accuracy of the feedback in DSM2.</p>
</section>
</section>
</section>
<section id="practical-analysis-of-delta-sigma-adcs-and-5-ota-using-xschem" class="level1">
<h1>Practical Analysis of Delta-Sigma ADCs and 5-OTA using xschem</h1>
<section id="st-order-modulator-analysis" class="level2">
<h2 class="anchored" data-anchor-id="st-order-modulator-analysis">1st Order Modulator Analysis</h2>
<p>A <strong>1st order modulator</strong> is a key building block in <strong>Sigma-Delta (ΣΔ) Analog-to-Digital Converters (ADCs)</strong>. It is designed to shape quantization noise while providing high-resolution digital output. The circuit consists of four primary stages:</p>
<ol type="1">
<li><strong>Input Stage (Sampling Circuit)</strong></li>
<li><strong>Integrator</strong></li>
<li><strong>Quantizer (Comparator + Flip-Flop)</strong></li>
<li><strong>Feedback Loop</strong></li>
</ol>
<p>The primary function of this modulator is to <strong>shape noise</strong>, improve signal resolution, and enable oversampling techniques for ADCs.</p>
<section id="circuit-diagram-with-description" class="level3">
<h3 class="anchored" data-anchor-id="circuit-diagram-with-description">Circuit Diagram with Description</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-17-5d7cd01b-1d75-47c3-acce-806fc109b366.png" class="img-fluid figure-img"></p>
<figcaption>Circuit Diagram</figcaption>
</figure>
</div>
<section id="input-stage-sampling-circuit" class="level4">
<h4 class="anchored" data-anchor-id="input-stage-sampling-circuit">Input Stage (Sampling Circuit)</h4>
<ul>
<li>The <strong>switched-capacitor network</strong> samples the input signal (<code>Vin</code>).</li>
<li><strong>Clock Signals (<code>p1</code> and <code>p2</code>)</strong> control the switching operation.</li>
<li><strong>Sampling capacitor (<code>C1</code>)</strong> temporarily stores charge corresponding to the input voltage.</li>
</ul>
</section>
<section id="integrator-charge-accumulation" class="level4">
<h4 class="anchored" data-anchor-id="integrator-charge-accumulation">Integrator (Charge Accumulation)</h4>
<ul>
<li>The integrator accumulates the charge transferred by the switched capacitor.</li>
<li>The output voltage (<code>Vo</code>) represents the <strong>integrated version of <code>Vin</code></strong>.</li>
<li>A <strong>gain element (<code>E1</code>)</strong> scales the output voltage appropriately.</li>
</ul>
</section>
<section id="quantizer-comparator-flip-flop" class="level4">
<h4 class="anchored" data-anchor-id="quantizer-comparator-flip-flop">Quantizer (Comparator + Flip-Flop)</h4>
<ul>
<li>The comparator (<code>E2</code>) compares <code>Vo</code> with a reference voltage (<code>Vcmp</code>).</li>
<li>The flip-flop latches the comparator output to generate a <strong>stable digital signal (<code>Q</code>)</strong>.</li>
</ul>
</section>
<section id="feedback-loop" class="level4">
<h4 class="anchored" data-anchor-id="feedback-loop">Feedback Loop</h4>
<ul>
<li>The digital output (<code>Q</code>) is <strong>fed back</strong> to control the reference voltage.</li>
<li>This ensures error correction and stabilizes the modulator operation.</li>
</ul>
</section>
</section>
<section id="waveform-analysis-of-first-order-delta-sigma-modulator-dsm1" class="level3">
<h3 class="anchored" data-anchor-id="waveform-analysis-of-first-order-delta-sigma-modulator-dsm1">Waveform Analysis of First-Order Delta-Sigma Modulator (DSM1)</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-44-f5c32c49-e798-4d09-9a44-62a3716e85d1.png" class="img-fluid figure-img"></p>
<figcaption>Waveform Analysis</figcaption>
</figure>
</div>
<section id="input-signal-vi" class="level4">
<h4 class="anchored" data-anchor-id="input-signal-vi">Input Signal (<code>Vi</code>)</h4>
<ul>
<li>The input voltage (<code>Vi</code>) appears as a <strong>constant DC signal</strong>.</li>
<li>This input is sampled and processed by the switched-capacitor circuit before integration.</li>
</ul>
</section>
<section id="integrator-output-vo" class="level4">
<h4 class="anchored" data-anchor-id="integrator-output-vo">Integrator Output (<code>Vo</code>)</h4>
<ul>
<li>The integrator output (<code>Vo</code>) exhibits a <strong>staircase waveform</strong>, which is characteristic of charge accumulation over time.</li>
<li>When a threshold is reached, the output resets, creating periodic downward transitions.</li>
<li>This behavior is essential for the noise shaping mechanism.</li>
</ul>
</section>
<section id="quantized-output-q" class="level4">
<h4 class="anchored" data-anchor-id="quantized-output-q">Quantized Output (<code>Q</code>)</h4>
<ul>
<li>The quantized output (<code>Q</code>) is switches <strong>between high (<code>1</code>) and low (<code>0</code>) states</strong>, functioning as a <strong>1-bit digital representation of <code>Vo</code></strong>.</li>
<li>The <strong>comparator</strong> evaluates <code>Vo</code> against a threshold.When <code>Vo</code> crosses the threshold, <code>Q</code> <strong>flips between <code>1</code> and <code>0</code></strong>.</li>
<li>This binary sequence represents a <strong>digitized version of the input signal</strong>.</li>
</ul>
</section>
</section>
<section id="operation-of-each-stage" class="level3">
<h3 class="anchored" data-anchor-id="operation-of-each-stage">Operation of Each Stage</h3>
<section id="sampling" class="level4">
<h4 class="anchored" data-anchor-id="sampling">Sampling</h4>
<ol type="1">
<li>When <code>p1</code> is HIGH, <code>Vin</code> is <strong>sampled</strong> onto <code>C1</code>.</li>
<li>When <code>p2</code> is HIGH, the stored charge is <strong>transferred</strong>, affecting <code>Vx</code> and <code>Vo</code>.</li>
</ol>
</section>
<section id="integration" class="level4">
<h4 class="anchored" data-anchor-id="integration">Integration</h4>
<ul>
<li>The capacitor <strong>moves charge from <code>Vx</code> to <code>Vo</code></strong>, accumulating voltage over time.</li>
<li>This operation ensures <strong>continuous integration of the input signal</strong>.</li>
<li>The integrator <strong>filters high-frequency noise</strong>, crucial for noise shaping.</li>
</ul>
</section>
<section id="quantization" class="level4">
<h4 class="anchored" data-anchor-id="quantization">Quantization</h4>
<ol type="1">
<li>The <strong>comparator (<code>E2</code>)</strong> evaluates <code>Vo</code> against <code>Vcmp</code>.</li>
<li>If <code>Vo &gt; Vcmp</code>, the output <strong>goes HIGH</strong>, else it <strong>goes LOW</strong>.</li>
<li>The <strong>flip-flop (<code>x1</code>)</strong> stabilizes this decision, preventing rapid oscillations.</li>
</ol>
</section>
<section id="feedback" class="level4">
<h4 class="anchored" data-anchor-id="feedback">Feedback</h4>
<ul>
<li>The <strong>feedback loop</strong> uses the digital output (<code>Q</code>) to adjust the reference voltage dynamically.</li>
<li>This action <strong>corrects quantization errors</strong>, ensuring accurate digitization.</li>
</ul>
</section>
</section>
<section id="noise-shaping-in-the-modulator" class="level3">
<h3 class="anchored" data-anchor-id="noise-shaping-in-the-modulator">Noise Shaping in the Modulator</h3>
<ul>
<li><strong>Quantization noise is pushed to higher frequencies</strong>, improving in-band SNR.</li>
<li>Due to <strong>oversampling</strong>, low-frequency signals retain higher accuracy.</li>
<li><strong>The integrator smooths the signal</strong>, ensuring high-resolution output.</li>
<li>The <strong>feedback mechanism minimizes error</strong>, contributing to effective noise shaping.</li>
</ul>
</section>
</section>
<section id="nd-order-modulator-analysis" class="level2">
<h2 class="anchored" data-anchor-id="nd-order-modulator-analysis">2nd Order Modulator Analysis</h2>
<p>A <strong>second-order sigma-delta (ΣΔ) modulator</strong> extends the principles of a first-order modulator by introducing a <strong>second integrator</strong>, which enhances noise shaping and improves resolution. It is a fundamental block in high-resolution Analog-to-Digital Converters (ADCs), particularly in applications requiring high dynamic range and low quantization noise.</p>
<p>A second-order ΣΔ modulator consists of the following primary stages:</p>
<ol type="1">
<li><strong>Input Stage (Sampling Circuit)</strong></li>
<li><strong>First Integrator</strong></li>
<li><strong>Second Integrator</strong></li>
<li><strong>Quantizer (Comparator + Flip-Flop)</strong></li>
<li><strong>Feedback Loop</strong></li>
</ol>
<p>This design improves noise shaping performance by increasing the suppression of quantization noise at low frequencies.</p>
<section id="circuit-diagram-with-description-1" class="level3">
<h3 class="anchored" data-anchor-id="circuit-diagram-with-description-1">Circuit Diagram with Description</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-8-348b2588-9cc1-41a8-9986-5797e8bd41a4.png" class="img-fluid figure-img"></p>
<figcaption>Circuit Diagram</figcaption>
</figure>
</div>
<section id="input-stage-sampling-circuit-1" class="level4">
<h4 class="anchored" data-anchor-id="input-stage-sampling-circuit-1">Input Stage (Sampling Circuit)</h4>
<ul>
<li>The <strong>switched-capacitor network</strong> samples the input signal (<code>Vin</code>).</li>
<li><strong>Clock Phases (<code>p1</code>, <code>p2</code>)</strong> control the charge transfer process.</li>
<li><strong>Sampling capacitor (<code>C1</code>)</strong> temporarily stores the charge representing <code>Vin</code>.</li>
</ul>
</section>
<section id="first-integrator" class="level4">
<h4 class="anchored" data-anchor-id="first-integrator">First Integrator</h4>
<ul>
<li>The <strong>first integrator accumulates charge</strong> from the input stage.</li>
<li>It acts as a <strong>low-pass filter</strong>, shaping quantization noise.</li>
<li>The integrator consists of an <strong>operational amplifier (Op-Amp) and a feedback capacitor (<code>C2</code>)</strong>.</li>
<li>Output (<code>Vo1</code>) represents the first level of integration.</li>
</ul>
</section>
<section id="second-integrator" class="level4">
<h4 class="anchored" data-anchor-id="second-integrator">Second Integrator</h4>
<ul>
<li>The output of the first integrator is fed into the <strong>second integrator</strong>.</li>
<li>This stage further shapes the noise, improving quantization noise suppression.</li>
<li>The <strong>output (<code>Vo2</code>)</strong> is an enhanced version of <code>Vo1</code>, ensuring better noise shaping.</li>
</ul>
</section>
<section id="quantizer-comparator-flip-flop-1" class="level4">
<h4 class="anchored" data-anchor-id="quantizer-comparator-flip-flop-1">Quantizer (Comparator + Flip-Flop)</h4>
<ul>
<li>The <strong>comparator (<code>E2</code>)</strong> determines whether <code>Vo2</code> is above or below a reference (<code>Vcmp</code>).</li>
<li>The <strong>flip-flop (<code>x1</code>)</strong> stabilizes the digital decision, preventing unintended toggling.</li>
<li>The <strong>output (<code>Q</code>)</strong> is a 1-bit representation of <code>Vo2</code>.</li>
</ul>
</section>
<section id="feedback-loop-1" class="level4">
<h4 class="anchored" data-anchor-id="feedback-loop-1">Feedback Loop</h4>
<ul>
<li>The digital output (<code>Q</code>) is <strong>fed back via a Digital-to-Analog Converter (DAC)</strong>.</li>
<li>The feedback adjusts the reference voltage dynamically, reducing errors and improving stability.</li>
<li>The feedback is applied to both integrators, ensuring system stability and enhancing linearity.</li>
</ul>
</section>
</section>
<section id="waveform-analysis-of-second-order-sigma-delta-modulator" class="level3">
<h3 class="anchored" data-anchor-id="waveform-analysis-of-second-order-sigma-delta-modulator">Waveform Analysis of Second-Order Sigma-Delta Modulator</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-7-3431ef9f-ecc7-47c9-8859-6be9fb7ea65f.png" class="img-fluid figure-img"></p>
<figcaption>Waveform Analysis</figcaption>
</figure>
</div>
<section id="input-signal-vi-1" class="level4">
<h4 class="anchored" data-anchor-id="input-signal-vi-1">Input Signal (<code>Vi</code>)</h4>
<ul>
<li>This is the <strong>original analog signal</strong> that is sampled and processed.</li>
<li>The signal is sampled and processed in discrete steps.</li>
</ul>
</section>
<section id="integrator-outputs" class="level4">
<h4 class="anchored" data-anchor-id="integrator-outputs">Integrator Outputs</h4>
<section id="vo1-output-of-1st-integrator" class="level5">
<h5 class="anchored" data-anchor-id="vo1-output-of-1st-integrator"><code>Vo1</code> (Output of 1st Integrator)</h5>
<pre><code>- The first integrator accumulates the input signal, forming a **staircase pattern**.
- The output shows gradual upward and downward movement, reflecting charge accumulation and discharge.
- `Vo1` acts as a **low-pass filter**, preventing high-frequency noise from dominating.
- This signal represents the first level of **quantization noise shaping**.</code></pre>
</section>
<section id="vo2-output-of-2nd-integrator" class="level5">
<h5 class="anchored" data-anchor-id="vo2-output-of-2nd-integrator"><code>Vo2</code> (Output of 2nd Integrator)</h5>
<pre><code>- Further smooths `Vo1`, providing additional **noise shaping**.
- The waveform appears more **oscillatory**, reflecting improved quantization noise suppression.
- The orange waveform is **less staircase-like than** `Vo1`, meaning that the second integration has smoothed out variations.</code></pre>
</section>
</section>
<section id="quantized-output-q-1" class="level4">
<h4 class="anchored" data-anchor-id="quantized-output-q-1">Quantized Output (<code>Q</code>)</h4>
<ul>
<li>The quantized signal (<code>Q</code>) alternates between <code>1</code> and <code>0</code>, representing the <strong>digital version</strong> of the modulated input.</li>
<li>The <strong>comparator makes decisions</strong> based on <code>Vo2</code>, generating the digital output.</li>
<li>Rapid toggling indicates <strong>feedback-driven quantization</strong>.</li>
<li>The <strong>feedback loop ensures accurate digital representation</strong>.</li>
</ul>
</section>
</section>
<section id="operation-of-each-stage-1" class="level3">
<h3 class="anchored" data-anchor-id="operation-of-each-stage-1">Operation of Each Stage</h3>
<section id="sampling-1" class="level4">
<h4 class="anchored" data-anchor-id="sampling-1">Sampling</h4>
<ol type="1">
<li>When <strong><code>p1</code></strong>** is HIGH**, <code>Vin</code> is sampled onto <code>C1</code>.</li>
<li>When <strong><code>p2</code></strong>** is HIGH**, the charge is transferred to the first integrator.</li>
</ol>
</section>
<section id="first-integration" class="level4">
<h4 class="anchored" data-anchor-id="first-integration">First Integration</h4>
<ul>
<li>The first integrator accumulates charge, integrating the input over time.</li>
<li>The output (<code>Vo1</code>) represents the <strong>summed charge</strong>, shaping quantization noise.</li>
</ul>
</section>
<section id="second-integration" class="level4">
<h4 class="anchored" data-anchor-id="second-integration">Second Integration</h4>
<ul>
<li>The second integrator further processes <code>Vo1</code>, adding another layer of <strong>noise shaping</strong>.</li>
<li>This stage ensures higher accuracy and better <strong>low-frequency noise suppression</strong>.</li>
</ul>
</section>
<section id="quantization-1" class="level4">
<h4 class="anchored" data-anchor-id="quantization-1">Quantization</h4>
<ol type="1">
<li>The <strong>comparator (<code>E2</code>)</strong> compares <code>Vo2</code> with <code>Vcmp</code>.</li>
<li>If <code>Vo2 &gt; Vcmp</code>, the output is HIGH (<code>1</code>), else LOW (<code>0</code>).</li>
<li>The <strong>flip-flop (<code>x1</code>)</strong> stabilizes the output to prevent spurious transitions.</li>
</ol>
</section>
<section id="feedback-loop-2" class="level4">
<h4 class="anchored" data-anchor-id="feedback-loop-2">Feedback Loop</h4>
<ul>
<li>The <strong>feedback DAC converts <code>Q</code></strong>** back to an analog signal**.</li>
<li>This signal is <strong>subtracted from the input</strong>, reducing error and improving linearity.</li>
<li>The feedback is applied to both integrators, maintaining <strong>stability</strong> and <strong>dynamic range</strong>.</li>
</ul>
</section>
</section>
<section id="noise-shaping-in-the-modulator-1" class="level3">
<h3 class="anchored" data-anchor-id="noise-shaping-in-the-modulator-1">Noise Shaping in the Modulator</h3>
<ul>
<li><strong>Quantization noise is pushed to even higher frequencies</strong> compared to a first-order modulator.</li>
<li>The <strong>integrators act as low-pass filters</strong>, ensuring high SNR and improved resolution.</li>
</ul>
</section>
<section id="advantages-over-first-order-modulator" class="level3">
<h3 class="anchored" data-anchor-id="advantages-over-first-order-modulator">Advantages Over First-Order Modulator</h3>
<ul>
<li><strong>Improved Noise Shaping:</strong> Second-order modulation pushes more quantization noise to higher frequencies.</li>
<li><strong>Higher Signal-to-Noise Ratio (SNR):</strong> Provides better SNR compared to a first-order modulator.</li>
<li><strong>Enhanced Dynamic Range:</strong> Two integrators result in better suppression of low-frequency quantization noise.</li>
<li><strong>Increased Effective Number of Bits (ENOB):</strong> More precise digital representation of analog signals.</li>
<li><strong>Better Linearity:</strong> Reduces in-band noise and distortion effects, improving performance for high-precision applications.</li>
</ul>
</section>
</section>
<section id="five-transistor-operational-transconductance-amplifier-ota" class="level2">
<h2 class="anchored" data-anchor-id="five-transistor-operational-transconductance-amplifier-ota">Five-Transistor Operational Transconductance Amplifier (OTA)</h2>
<section id="introduction-1" class="level3">
<h3 class="anchored" data-anchor-id="introduction-1">Introduction</h3>
<p>Here we present the design, simulation, and analysis of a <strong>5-Transistor Operational Transconductance Amplifier (5T OTA)</strong>. For the circuit simulation, we are using <strong>Xcshem</strong> for schematic entry and <strong>ngspice</strong> for simulation.The <strong>130nm CMOS technology SG13G2</strong> from IHP Microelectronics is used. The primary objective was to replace the <strong>integrator opamp</strong> in the Delta-Sigma Modulator with the designed OTA and evaluate its performance.</p>
</section>
<section id="ota-design-and-implementation-1" class="level3">
<h3 class="anchored" data-anchor-id="ota-design-and-implementation-1">OTA Design and Implementation</h3>
<p>The design of the <strong>5T OTA</strong> was based on the methodologies outlined in the <a href="https://iic-jku.github.io/analog-circuit-design/#sec-basic-ota">Analog Circuit Design</a> resource from Johannes Kepler University. The <strong>Five-Transistor OTA</strong> is a fundamental building block in <strong>analog circuits</strong>, particularly in <strong>low-power and high-gain applications</strong>.</p>
<p>The <strong>5T OTA</strong> comprises the following components:</p>
<p><em>The circuit consists of six MOSFETs (M1 to M6) and a bias current source (Ibias)</em></p>
<ol type="1">
<li><strong>Differential Input Pair (M1, M2)</strong>
<ul>
<li>Converts the differential input voltage into a current difference.</li>
</ul></li>
<li><strong>Current Mirror Load (M3, M4)</strong>
<ul>
<li>Provides high gain by mirroring the current and acting as an active load.</li>
</ul></li>
<li><strong>Tail Current Source (M5)</strong>
<ul>
<li>Sets a constant bias current for the differential pair.</li>
</ul></li>
<li><strong>Biasing Circuit (M6)</strong>
<ul>
<li>Generates the required bias voltage for <strong>M5</strong>.</li>
</ul></li>
<li><strong>Bias Current Source (Ibias)</strong>
<ul>
<li>Provides a stable current to the circuit. This current sets the transconductance of the OTA.</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-14-4efdadb9-7a34-4091-9264-32f5df518f50.png" class="img-fluid figure-img"></p>
<figcaption>image-1</figcaption>
</figure>
</div>
</section>
<section id="working-of-each-component" class="level3">
<h3 class="anchored" data-anchor-id="working-of-each-component">Working of Each Component</h3>
<section id="differential-input-pair-m1-m2" class="level4">
<h4 class="anchored" data-anchor-id="differential-input-pair-m1-m2">Differential Input Pair (M1, M2)</h4>
<ul>
<li><strong>M1 and M2</strong> form an NMOS differential amplifier.</li>
<li>They receive differential inputs <strong>(Vin+ and Vin-)</strong>.</li>
<li>The <strong>gate voltage difference (Vin+ - Vin-)</strong> modulates the drain currents of M1 and M2.</li>
<li>If <strong>Vin+ &gt; Vin-</strong>, more current flows through <strong>M1</strong>, decreasing current through <strong>M2</strong>.</li>
</ul>
</section>
<section id="current-mirror-load-m3-m4" class="level4">
<h4 class="anchored" data-anchor-id="current-mirror-load-m3-m4">Current Mirror Load (M3, M4)</h4>
<ul>
<li><strong>M3 and M4</strong> form a <strong>PMOS current mirror</strong>, acting as an active load.</li>
<li>The current in one branch is mirrored in the other branch by matching the transistor sizes and ensuring similar operating conditions.</li>
<li>Converts the current difference of <strong>M1 and M2</strong> into a voltage output.</li>
<li>Provides <strong>high output impedance</strong>, improving voltage gain.</li>
</ul>
</section>
<section id="tail-current-source-m5" class="level4">
<h4 class="anchored" data-anchor-id="tail-current-source-m5">Tail Current Source (M5)</h4>
<ul>
<li><strong>M5 acts as a current source</strong>, ensuring a <strong>constant current bias</strong> for the differential pair.</li>
<li>Operates in <strong>saturation mode</strong>, ensuring that <strong>I(M1) + I(M2) = I_bias</strong>.</li>
<li>Improves <strong>common-mode rejection ratio (CMRR)</strong>.</li>
</ul>
</section>
<section id="biasing-circuit-m6" class="level4">
<h4 class="anchored" data-anchor-id="biasing-circuit-m6">Biasing Circuit (M6)</h4>
<ul>
<li><strong>M6 is responsible for biasing M5</strong>, ensuring a stable operating point.</li>
<li>It provides a reference current, ensuring correct <strong>biasing of the OTA</strong>.</li>
</ul>
</section>
</section>
<section id="creating-a-symbol-in-xschem" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-symbol-in-xschem">Creating a Symbol in Xschem</h3>
<p>To use the <strong>5T OTA</strong> in a larger circuit, we create a symbol in Xschem.</p>
<section id="steps" class="level4">
<h4 class="anchored" data-anchor-id="steps">Steps:</h4>
<ol type="1">
<li><strong>Open Xschem</strong> and the <strong>OTA schematic</strong>.</li>
<li><strong>Click “Symbol” → “Make Symbol”</strong>.</li>
<li><strong>Modify the <code>.sym</code> file</strong> (arrange input/output pins).</li>
<li><strong>Save and use the symbol</strong> in new circuits.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-39-dd21805d-9511-42a8-a41e-7f5d21f37a7d.png" class="img-fluid figure-img"></p>
<figcaption>image-2</figcaption>
</figure>
</div>
</section>
</section>
<section id="t-ota-testbench-and-performance-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="t-ota-testbench-and-performance-evaluation">5T OTA Testbench and Performance Evaluation</h3>
</section>
<section id="voltage-buffer-with-ota" class="level3">
<h3 class="anchored" data-anchor-id="voltage-buffer-with-ota">Voltage Buffer with OTA</h3>
<p>In order to design an OTA we need an application, and from this we derive the circuit specifications.We have used this <strong>OTA to function as a voltage buffer</strong> which lightly loads an input voltage source and can drive a large capacitive load.</p>
<p>In designing the OTA for this voltage buffer application, we have referred to the specifications outlined in the <a href="https://iic-jku.github.io/analog-circuit-design/#sec-voltage-buffer-with-ota">Analog Circuit Design resource</a>. The key specifications are as follows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-10-34ead2ea-608e-4078-ae69-3aadc0256b4f.png" class="img-fluid figure-img"></p>
<figcaption>image-3</figcaption>
</figure>
</div>
<section id="circuit-diagram-with-description-2" class="level4">
<h4 class="anchored" data-anchor-id="circuit-diagram-with-description-2">Circuit Diagram with Description</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-2-06aee0ce-6e5c-4e47-9d9a-40ed61649715.png" class="img-fluid figure-img"></p>
<figcaption>image-4</figcaption>
</figure>
</div>
<ul>
<li><strong>OTA (Operational Transconductance Amplifier):</strong> The core component used to buffer the input voltage.</li>
<li><strong>Input Voltage Source (Vin):</strong> Provides a DC bias of 0.8V with an AC signal for analysis.</li>
<li><strong>Power Supply (Vdd = 1.5V, Vss = 0V):</strong> Supplies the OTA.</li>
<li><strong>Capacitive Load (C1 = 50 fF):</strong> Represents the output load.</li>
<li><strong>DC Analysis (dc Vin 0.7 0.9 0.01):</strong> Sweeps the input voltage from 0.7 to 0.9V in steps of 10mV.</li>
</ul>
</section>
<section id="expected-waveform-analysis" class="level4">
<h4 class="anchored" data-anchor-id="expected-waveform-analysis">Expected Waveform Analysis</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-33-b5493a71-4f1e-4bef-81f5-ac6a2ec6bdd3.png" class="img-fluid figure-img"></p>
<figcaption>image-5</figcaption>
</figure>
</div>
<p>Since the OTA is used as a voltage buffer, the ideal behavior would be: <strong>𝑉out≈𝑉in</strong></p>
</section>
</section>
<section id="ota-as-a-comparator" class="level3">
<h3 class="anchored" data-anchor-id="ota-as-a-comparator">OTA as a Comparator</h3>
<p>The circuit presented here utilizes an OTA in a comparator configuration where an AC signal is applied at the non-inverting input, and a reference voltage is provided at the inverting input. The output waveform reflects the behavior of a comparator, switching states based on the input conditions.</p>
<section id="circuit-diagram-with-description-3" class="level4">
<h4 class="anchored" data-anchor-id="circuit-diagram-with-description-3">Circuit Diagram with Description</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-24-74fc9f89-1265-40c1-a7ba-9eb9e0636738.png" class="img-fluid figure-img"></p>
<figcaption>image-6</figcaption>
</figure>
</div>
<p>The given OTA circuit acts as a comparator. The configuration consists of: - <strong>Input Signal (Vin1)</strong>: A sinusoidal signal of amplitude 0.8V and frequency 1kHz. - <strong>OTA Module (OTA_test)</strong>: The core component acting as a comparator. - <strong>Reference Voltage (Vinn)</strong>: A DC bias voltage of 0.4V. - <strong>Power Supply (Vdd)</strong>: A 1.5V source powering the OTA. - <strong>Load Capacitor (50fF)</strong>: A small capacitive load stabilizing the output.</p>
</section>
<section id="working-principle-and-waveform" class="level4">
<h4 class="anchored" data-anchor-id="working-principle-and-waveform">Working Principle and Waveform</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-18-5e025fc0-e566-4a90-a3c4-1edc8430d47a.png" class="img-fluid figure-img"></p>
<figcaption>image-7</figcaption>
</figure>
</div>
<p>The OTA operates as a comparator where: - When <strong>Vinp &gt; Vinn (0.4V)</strong>, the output switches <strong>high (approximately Vdd = 1.5V)</strong>. - When <strong>Vinp &lt; Vinn (0.4V)</strong>, the output switches <strong>low (approximately 0V)</strong>. - The OTA amplifies the difference between <code>Vinp</code> and <code>Vinn</code>, pushing the output to either the supply rail or ground.</p>
</section>
</section>
<section id="ota-as-a-integrator" class="level3">
<h3 class="anchored" data-anchor-id="ota-as-a-integrator">OTA as a Integrator</h3>
<section id="circuit-diagram-with-description-4" class="level4">
<h4 class="anchored" data-anchor-id="circuit-diagram-with-description-4"><strong>Circuit Diagram with Description</strong></h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-25-869f61ab-b507-439f-adba-bbc84df7b60a.png" class="img-fluid figure-img"></p>
<figcaption>image-8</figcaption>
</figure>
</div>
<p>The given circuit consists of: - <strong>Input Voltage(Vin)</strong> A pulse waveform acting as the input signal. - <strong>Resistor (10kΩ)</strong> which converts the input voltage into current. - <strong>Capacitor (53pF)</strong> which integrates the current at the output. - <strong>OTA Block</strong> Acts as the active element performing integration. - <strong>Power supply of 1.5V</strong>.</p>
<p>The OTA operates as an integrator due to the capacitor connected at the output node. The input voltage difference is converted to current, which then charges the capacitor over time, producing an integrated output waveform. Ideally, the output should be a perfect triangular waveform corresponding to the integral of the square wave input.</p>
</section>
<section id="waveform-analysis" class="level4">
<h4 class="anchored" data-anchor-id="waveform-analysis">Waveform Analysis</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CEMSmd_files/figure-html/3f02c421-9a50-4ce9-a84c-64c4f526d0f6-40-e42cccf4-482f-4b85-bbcf-38c472c54e8a.png" class="img-fluid figure-img"></p>
<figcaption>image-9</figcaption>
</figure>
</div>
</section>
<section id="expected-integrator-output" class="level4">
<h4 class="anchored" data-anchor-id="expected-integrator-output">Expected Integrator Output:</h4>
<ul>
<li>Ideally, an integrator should produce a <strong>triangular wave</strong> when driven by a square wave input.</li>
<li>The integration process converts the high and low levels of the input pulse into a continuous increase or decrease in output voltage.</li>
</ul>
</section>
<section id="observed-output" class="level4">
<h4 class="anchored" data-anchor-id="observed-output">Observed Output:</h4>
<ul>
<li>The output waveform starts high and gradually <strong>decreases over time</strong>, rather than forming a clear triangular wave.</li>
<li>Instead of oscillating symmetrically, the <strong>output drifts downward</strong>, indicating a <strong>DC bias shift</strong>.</li>
</ul>
</section>
<section id="reasons-for-output-behavior" class="level4">
<h4 class="anchored" data-anchor-id="reasons-for-output-behavior">Reasons for Output Behavior</h4>
<ul>
<li><em>DC Bias Shift (Leakage Effects)</em> The exponential downward drift indicates that the capacitor is <em>losing charge over time</em>.</li>
<li><em>OTA Non-Idealities</em> Different design approaches need to be explored for OTA.</li>
</ul>
</section>
</section>
</section>
</section>
<section id="conclusion-2" class="level1">
<h1>Conclusion</h1>
<p>Delta-Sigma ADCs have proven to be a <strong>powerful and efficient</strong> solution for high-precision signal conversion. Their ability to <strong>reduce noise, improve resolution, and handle low-frequency signals</strong> makes them ideal for applications in <strong>medical devices, audio processing, and industrial sensors</strong>.</p>
<p>In this work, we explored the <strong>fundamentals of ADCs</strong>, the <strong>inner workings of Delta-Sigma Modulators</strong>, and their <strong>real-world applications</strong>. We also <strong>simulated</strong> a Delta-Sigma ADC system using key components like the <strong>ADXL335 accelerometer, ADS1115 ADC, and ESP8266 microcontroller</strong>, ensuring practical insights into how these systems function.</p>
<p>Through simulations in <strong>MATLAB, LTSpice, and Xschem</strong>, we analyzed different ADC architectures, comparing <strong>first and second-order Delta-Sigma Modulators</strong> to understand their trade-offs between <strong>accuracy, stability, and complexity</strong>.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>